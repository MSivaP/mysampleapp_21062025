

			Date 28 Aug 2022
	==========================================
	Course overview
	============
		Duration = 4 months
	Topics :
	=====
	1. Linux Administration with cluster setup  ( 3 months)
	2. Microsoft azure cloud  ( 1 month)
	3. Shell scripting ( 3 days)
	4. ANSIBLE  ( 3 Days)
	5. ITIL process (2 day)

pre-requisites:
===========
	1. Laptop = 4 GB RAM , Any processor , hard disk any size
	2. proper network 
	3. Mute cell phone before join to class
	
class timings :
==========
	7 to 8:30 AM  class time
	8:30 to 9 AM   doubts clarification 


	2 to 3 hours per day practice is required



		40 interview questions
	===========================
if your perfect in 40 interview questions 100 % job

		2 years experience = 4 to 6 lakhs
		3 years experience = 7 to 10 lakhs
		4 years experience = 8 to 12 lakhs

	linux is a os like windows
		windows is GUI(graphical user interface)
		linux is command line OS

			ls = list out current folder data
			cp = copy
			rm = rm
			mv = move
			cd = change directory


course
resume preparation
explaining self introduction
guidance in interview
support to job

fee + first month salary in 2 terms once you get job
======================================
 you can attend classes until you get job

		1 week demo
====================================
 demo will end on 4th sep 2022
	4th sep 

	
========================================================================================================================
	
Linux = is a Operating system
windows = is a operating system

	  Hardware   on top of harware we integrate program(OS). 

	cellphone ==> is there os?  yes there is OS . what is that OS ? android

in your laptop what OS you installed? windows 11, 10, 9, 7

		Linux administration
		================

	server  ==> OS ==> code development
	
	laptop ===> OS ==> java or c software ==> develop the code




Roles  of Linux OS administrator
=======================
	1. Install the OS on server
	2. create and delete users on servers 
	3. Install and delete softwares on servers
	4. disk management
	5.  websites configuration
	6. maintaining the server



 ==> Linux is a operating system.
 ==> what is a operating system? collection of programs which are work as a mediator between end user(you) and hardware.
	you entered mobile unlock pin ==> with help of os you entered pin ==> this pin will go to cell phone storage ==> verify is the entered pin is correct or wrong
		if correct then it opens
			else
		wron pin

		
	
			Red hat 8	
			SUSE 15

	
				HISTORY of UNIX and Linux
	==============================================================================

Unix is Operating system
Linux also operating system
windows also OS

unix is the parent for Linux OS


		Unix OS released in to marken on  1969 Dec
			Unix OS information
			================
			release year = Dec 1969
			OS  = Unix
			authors = ken thompson, dennis ritchie and douglas
			Language = C language

			Unix operating system developed in C language.
		
	OS is nothing but collection of programs

these 3 members were working in AT & T company. 		

		got idea to AT & T company to develop unix OS
	but in midle AT & T company dropped to develop unix. who continued unix os development is ? ken thompson,dennis and douglas(US citizens)
 


Unix or unix flavaours are multi user and multi task operating systems.
======================================================
			Linux OS information
			================
			Release Year   = 1991
			Author = Linus torvalds
		he did not develop linux os from stratch. he took unix os and customized programs and rleased his own os named it as Linux OS.

Linus was studing in one of the USA university and started developing own kernel using unix OS.
	finally he succeeded in 1991



	Unix flavours
	==========
		1. Linux
		2. Redhat Linux
		3. AIX
		4. HP Unix
		5. Solaris
		6. Debian

	Aix = IBM company OS
	HP UX = HP company OS
	Solaris = Oracle company OS
	Redhat Linux = redhat company OS
 
Linux Flavours:
=====
	1. Centos
	2. Redhat Linux 
	3. ubuntu
	4. Fedora
	5. Suse
	6. puppy linux
	7. linux mint


unix flavours and  linux flavours are Operating systems, these are mutli user and multi task operating systems.

	multi user = at a time multiple users can login to unix servers and start processes/tasks
	multi tasking = at a time multiple users can start multiple processes 


100 members also can connect to single server(machine) at a time. without any extra charges

windows = without any charges only 1 user can access the server at a time
	end user has to buy seperate license for multiple connections
	10 members want to connect then we have to pay some amount to microsoft
	100 members want to connect then different amount
	

Features:
========
1. unix flavours and  linux flavours are Operating systems, these are mutli user and multi task operating systems.
2. unix is a open source operating system
	code is open for any body . any body can download unix os and customize OS that is nothing open source os.

	how about linux ? linux also open source operating system.


	Redhat
	======
		Redhat enterprise linux 4      (rhel 4)
		Redhat enterprise linux 5      (rhel 5)
		Redhat enterprise linux 6      (rhel 6)
		Redhat enterprise linux 7      (rhel 7)
		Redhat enterprise linux 8    latest (rhel 8)
	SuSE
	====
		SuSE 11
		SuSE 12
		SUSE 15 latest
		

Unix developed in C
windows   = c#

	
					computer components
			=========================================
			1. processor = real worker who will execute the tasks
			2. RAM   =  mediator between end user and processor . he allow tasks from user and pass that task or job to processor
					again processor will give output then ram will send it to monitor
			3. Hard disk   = storage area. here only our files, directories, movies, audio everything will store
			4. Network adapter = 

			


kernel is the one of the program in OS

os is nothing but collection of programs. in that kernel is a one of main program.

	kernel is a heart of the OS or main program of OS or core program of OS.


			Centos     =  is not enterprise OS. it is free os if you pay amount also they will not support.
			REDHAT = it is a enterprise OS
	
	pay money and get support that is enterprise.



						Unix Architecture
						==============

Unix architecture is nothing but plan of Unix os.
  based on this plan only os has been developed.
		1. Application layer
		2. shell layer
		3. kernel layer
		4. Hardware


1. Application layer: which is the layer interacts with end user that layer is nothing but application layer. in application layer only we give input or trigger tasks.
		eg : double click on file is the task , requested to open file
			end user double file which is there on desktop, 
				now desktop is the application and double is the task to open , request will go to shell then shell will pass that request to
				kernel and kernel ask hard disk to open that.

2. shell:
   is the security component
		he verify the request if request is valid then send it to kernel




===================================================================================================================
		

	Lab setup in personal PC
	=====================
		1.  vmware workstation  : it's software by vmware company. using vmware workstation we are going to create virtual machines in our laptop
					laptop ==> windows os ==> vmware workstation software ==> create vm ==> install linux os on virtual machine
		2.  redhat OS  : it's a OS(opearating system) which we install on vm(virtual machine)

Tasks :
=====
	Task 1 : install vmware workstation in laptop ( double click on vmware software and next next next only)
	Task 2 : open vmware workstation and create virtual machine
	Task 3 :  Install Linux OS on virtual machine
	

	
================================================06 Sep 2022=======================================================================
  Default directories
=====================
		 
			default administrator is = root
			administrator means: who is having full rights on machine. like installing software	, un-installing software, creating user,
			deleting user



pwd = print working directory
cd = change directory . this command is used for go to another directory
		sync : cd /
			cd /boot
ls = list current directory files and directories
whoami = will tell which user is currently logged in

				/     
		==========================	
	/ is a directory or folder

		inside / directory we can create files or directories

				/ is the parent for all files and directory

			/root  = here there are 2 directories   / is main directory and inside /root is subdirectory
			


		Default directories
	===============================
we are going to understand what are those default directories and what kind of data will be there and what is the purpose of that directory.

		1. /boot
		2. /root
		3. /home
		4. /etc
		5. /var
		6. /usr
			/usr/bin     or  /bin
			/usr/sbin    or /sbin
		7. /lib
		8. /dev
		9. /proc
		10. /mnt
		11. /tmp


1. /boot:
=========
		it contains OS boot up programs or it contains os bootable files. Operating system will start with help of /boot data only 
2. /root:
=========
		it is a home directory of root user. root is administrator so his home is /root
			normal users can not enter into root user home directory.
3. /home:
========
		It contains other users home directories. by default system will allocate home directories for other users in /home
			eg : prasad is the normal user for him home directory allocated in /home
				/home/prasad
			 babu
				/home/babu

  for root home directory is /root
	for normal users = /home/username
4. /etc:
========
	it contains system and applications configuration files.
			configuration files are nothing but settings.
5. /var:
=======
	It contains system activity logs.
		i mean inside system what is happen that report updated in /var directory
			eg : user is created this log will update in /var
				user is logged in to system that information also updated in /var

6. /usr:
========
		it contains user binary programs, user binary programs are nothing but user executable programs 
			user executable programs are nothing but commands.

	/usr directory contains user commands
			eg : cd, ls, pwd, whoami, rm , useradd, userdel

			bin   = common commands which are required for normal user and administrator
			sbin  =  it contains only administrator related commands
					
				useradd = bin or sbin catogory command?  sbin
				ls = is bin or sbin? bin
				cd = is bin or sbin? bin
				userdel = is bin or sbin? sbin
				installing software = sbin

			/usr/bin link crated to /bin
			/usr/sbin link created to /sbin
7. /lib:
	it contains os related library programs. /lib programs will help to load OS or bootup OS.
		any command will take library program help and execute.
	/lib programs are playing key role to execute any command
			useradd it is command to create user but it take /lib program help to execute.

8. /dev:
========
	it contains device names which are connected to machine
	
			/dev/sda  = sda means first disk
			     sata disk a
			/dev/sdb   is the second disk
			/dev/sr0  is the cd rom or dvd
			
9. /proc:
=========
		this directory is used by processor. he will keep running jobs/tasks information inside /proc

	this directory is dedicated for processor
10. /mnt : empty directory can be used for any purpose
	you can mount usb or cd to /mnt directory.
11. /tmp : all system programs and third party applications will use this directory to store temparary data.
		
		normal users , administrator and programs will have rights to use /tmp 

		
========================================================================================================================================
				Basic commands
========================================================================================================================================
		how to create file
		how to create directory
		how to delete file or directories
		how to get the os version
		how to get the hard disk size
		how to get the RAM size



pwd = print working directory. it tells you where you are . that means in which directory you are

ls = list out current folder files and directories
		Blue = folder
		Black/white = files
		
cd = change directory
		eg : cd /
			cd /etc

					How to create directory/folder
			==================================================
				mkdir testdir1
mkdir = make directory
			
				mkdir prasad
				cd prasad
		
			How to create file
	===============================================
		there are 3 default methods to create file or manage files
			1. cat
			2. vi
			3. touch

1. Cat :
======
		using cat command how to create file

		cat > file1 
			synt :  cat > <filename>

		cat > file1
		                  created new file to practice cat command
			we are learning linux administration course
	to save    press ctrl and d

	
			how to view the file content:
			=====================
				cat  file1
				view the file content with line numbers
				cat -n file1
		how to add some more content to existing file
		==================================
			cat >> file1
			  adding some content for test append option
				we are doing cat
	to save and come out 
			ctrl and d

drawback in cat is 
=============
		we can not modify file content. that means existing data not possible to modify

			
2. VI (virtual interface)
================
	using vi we can create file and modify file content also

			vi  filename




few basic commands:
===============
how to get the OS version
	cat /etc/os-release
		or
	hostnamectl status
How to get the hostname(computer name)
		hostname
			or	
				uname -n
how to change the hostname(computer name)
		hostnamectl set-hostname batch28m1
	hostname
how to get the RAM size
	free -m       or  free -g    or free -k
		cat /proc/meminfo
how to get the CPU information
		lscpu
			or
			cat /proc/cpuinfo
how to get disk information
		lsblk
			or
				lsscsi
					or
						fdisk -l




==============================================vi==================================================
		virtual interface

using vi we can create file and modify file content

		how to create file
			vi filename

				vi f1

				there are 3 modes inside vi
			=================================
				1. command mode
				2. Insert mode
				3. Replacement mode

command mode : we can modify or delete file content when we are in the command mode
eg : dd is the command if we press 2 times dd it deletes the one line
	10dd it deletes 10 lines from cursor position
	yy = copy one line
the above commands will work when your in command mode

by default we will be in command mode. how to swith to insert mode
	press i
how to switch from insert mode to command
	press esc key


		vi f1
			then press i to switch to insert mode then type content
		
		how to save the file content
			press esc key and type :wq
		w = save
		q = quit


dd  = is for delete cursor position(standing) line
10dd = is for delete 10 lines from cursor standing line to down
u = is for undo the changes .
yy= is for copy cursor standing line(yank)
10yy = is for copy 10 lines from cursor standing line to down
p = is for past the copied lines
:se nu   = is for set the line numbers for the content
:set nu
:se nonu  = to hide line numbers
:5  = is for take cursor to 5th line
:10   = is for take cursor to 10th line

:wq   save and come out
:q  come out without save

i = switch to insert mode
esc key = back to or switch to command mode

:4d  and press enter key : is for delete particular line
	here we are deleting 4th line

/string  or /word : is for search the string from cursor position to down  n next where is exist N is previous location where string found
?string or ?word : is for search the string from cursor position to up

		replace
===================================
	:%s/babu/prasad babu/g
s = substitute
	   :%s/existingword/newword/g
g = global means inside file every where

====================================

 capital G shift g is nothing but capital            G = is for take cursor to last line of the file
gg = is for take cursor to first line of the file
 $ = is for take cursor to last position of line
  0 = is for take cursor to first position of line

i = switch to insert mode
a = insert mode after cursor position
       difference i and a means = i insert into same position where cursor is standing
	a = insert after cursor position

x = is for delete single char
dw = is for delete the cursor standing word
10x = is for delete 10 chars from cursor positions
20dw = delete 20 words from cursor position


Replacement mode:
==============
	shift r = R  = is for switch to replacement mode
		continuesly it allow to replace


:q  = quit from the file without save the changes
:w = save the changes
:wq = is for save the changes and quit from the file
:wq! = is for save the changes and quit fromt he file forcefully

			
		cat is for create file and view the file content
			drawback in cat is ? we can not modify the file content
		vi  is for create file and modify file content
			
		touch
	=================
	touch is for update current date and time stampt to file

	also using touch we can create empty files

		touch file1 
		touch f1 f2 f3 f3 f5
able to create 5 empty files
	later on we can store data or content inside these files
		vi f1



		copy
	=======================
	cp <source>   <Destination>
	cp /file1 /mnt/
		copying file1 which is there in / directory and destination is /mnt directory.
	mkdir /testdir
	cp -r /testdir /mnt
		-r = recursively 

		remove
	=====================
	rm filename
		rm /file1
			yes/no
		rm -r /directory
	
	without asking my confirmation it should delete then use the f
		rm -f /file1
		rm -rf /testdir
		remove files which are match to patern
			rm -rf file*
			
		move
	=======================
		cat > /file1
			content adding
			kdflajfa
			kdfjalf
		ctrl and d      is for save and comeout

		mv /file1 /mnt
	mv used for 2 purpose 1 is move file or directory from one place to another place and 2nd purpose is rename
		move = source and destination is different   (mv /file1 /mnt/)
		rename= source and destination is same       (mv /f1  /f2)
		

	How to power off the server
	===========================
		shutdown -h now
		shutdown -h 5  
				now is imediatly poweroff 5 means power off after 5 min
 			-h halt
		halt
		poweroff
		init 0
	how to reboot the server
	=======================
		shutdown -r now
		shutdown -r 10 
		reboot
		init 6


		how to get the date
	=====================================
		date
	how to get only date
		date +%F
	how to get only time
		date +%T
	how to get date in specified format
		date +"%d/%m/%Y"
	how to get yesterday date
		date --date "yesterday"
	20 days back what was the date
		date --date " 20 days ago"
	after 20 days
		date --date " 20 days"

	how to change date and time
	============================
	date -s "12 sep 2022 08:36:00"

	how to count lines in file
	==========================
		wc is the command to count the file lines,words and char
		wc -l /etc/fstab
			count lines in /etc/fstab file
		wc -w /etc/fstab
		wc -c /etc/fstab
	how to know type of the file
	============================
		file file1
	how to get the architecture of OS
	==================================
		32 bit or 64 bit
		arch
			or
				uname -m


	Head 
	tail

		head:
	=======================
		using head command we can print the first 10 line from file or we can print the specified lines from top

			eg: head filename
					by default it prints first 10 lines from the file
				head -2 filename
						it prints only first 2 lines from the file

				head -50 filename

		tail:
	==========================
	  using tail command we can print the last 10 lines from the file.
			tail filename
		need to print only last 2 lines
			tail -2 filename


kernel is the heart of the OS
kernel is the core program of the OS

			how to know kernel version
				uname -r

			os version
				cat /etc/os-release   
						or 
					hostnamectl status


cal:
====
	cal 08 2022




		less and more
	=====================================
		using less and more commands we can read lenghty file in page by page

		more filename
		less filename
	which is the advanced tool in these 2 tools(commands) 
			less is the advanced and has more features

		more filename
			space bar  = next page
			enter = next line
			b = previous page
			q = quit
			down and up arrows will not work in more
			search is not easy
		less filename
			space bar  = next page
			enter  = next line
			b = previous pae
			up and down arrwos will work
			search will be easy. it highlights the place where is exist
			quit
			h = help
history
========
	history command prints so far what commands executed 

	up arrow it gives previous command

	
how to know which user is logged in?
		whoami
right now how many users are logged in?
		w
		who
		users
what is the server uptime. from how long server is running
		uptime

how to create user?
	useradd babu
how to set passwd?
	passwd babu
how to check is the user is exist?
	id babu
how to switch from one user to another user
	su  - babu
switch user to babu user

	whoami

how to create hidden file or directory?
			vi .file1    touch .file2
			mkdir .testd1  

how to list out hidden files/directories?
	ls -a
		
inode number
===========
	for each and every file and directory will have one unique number that is nothing inode number
	how to know inode number of file
		ls -i filename
			or 
			stat filename


==========================================================================================================
		disk management
	================================
		there are 3 methods to do disk management
			1. Basic method
			2. LVM  ==============> is very very important
			3. MDADM



	Key components of computer
	=========================
		processor = processor is the worker who will execute end user task.
		RAM	  =  RAM is the mediator between end user and processor
		Disk	  =   disk is the storage area where we can store file,movie, audio .....
		OS	  = tasks are triggered in OS layer	



		1 TB disk
	===========================
		raw disk  ==> create partitions based on os ==> start using
			
		windows = drives ( c drive, d drive , e drive)
		Linux/unix = partitions

	disk partitions
					
  how to know how many disks are connected to server?
		lsblk
			or lsscsi


		sda(disk)
			sda1 ( partition 1)
			sda2 ( part 2)
			sda3 ( part 3)
			max 64 partitions
		sdb
			sdb1 (partition 1 in disk 2)
			sdb2 ( partition 2)
			
		sdc
		sdd
		sde
  in each and every disk we can create 64 partitions


	  Max 64 partitions we can create in disk
	==========================================
			sdb  
				sdb1   (P means primary partition)
				sdb2   (P  = primary partition)
				sdb3   (P  = Primary partition)
				sdb4	(E = extended partition)
				sdb5	(L - logical partitions)
				sdb6	(L - Logical partition)
				sdb64 	( L - Logical partition)

	Primary partition(P) = we use primary partition to store OS files or any software bootable files
	Logical (L) = to store normal data not bootable files(OS files)

		c drive = primary partition
		d drive = Logical partition

		
		disk  1 TB
	=====================
		part1 primary 100 GB
		part2 primary 200 GB
		part3 primary 100 GB
		part4 extend 600 GB
			part5 logical  it take space from extended partition 50 GB (Logical)
			part6 logical it take space from extended partition 50 GB   (Logical)


max 4 primary partitions are allowed in disk
		want to go 7 partitions then how sir?
		
			3 primary
			1 extended
			   4 logical

		want to go to 5 primary in single disk is it possible? 
					no
			max 4 primary



			3 p
			1 E
				60 L

		by mistake you created 
			4 primary then that's it we can not create any of the partition like extended or logical
	so recommended is 3 primary max
				1 extended 
					60 Logical



				your application team
					7 directories
				
			/data1  = 100  GB
			/data2   = 100 GB
			/data3   = 50 GB
			/data4  = 50 GB
			/data5   = 200 GB
			/data6	= 200 GB
			/data7   =10 GB
		
			   	sdb1  = 100 GB  ==> /data1   P
				sdb2 = 100 ==> /data2	P
				sdb3 = 50 GB ==> /data3	P
				sdb4 = 750 GB 		  E
					sdb5  50 GB ==> /data4
					sdb6  200 GB ==> /data5
					sdb7  200 GB ==> /data6
					sdb8  10 GB ==> /data7


					
				
echo " - - - " >> /sys/class/scsi_host/host0/scan
echo " - - - " >> /sys/class/scsi_host/host1/scan
echo " - - - " >> /sys/class/scsi_host/host2/scan
echo " - - - " >> /sys/class/scsi_host/host3/scan
echo " - - - " >> /sys/class/scsi_host/host4/scan

cd /sys/class/scsi_host/
ls
	host0
	host1


		
================================Revision class 20-09-2022===================================================================
pwd = print working directory
   it tells where you are

ls = list out the current folder data
cd = change directory. switch from one directory to another directory
	cd /

			/   is a directory

	this is the first directory, under this only everything will be there

	/boot = inside / boot is the sub directory , here we can find os bootable files
		if we delete /boot data then OS will not bootup(start)
	/root = /root is a home directory of root user
		who is the default administrator in linux severs?
				root
		his home is /root
	/home = kernel will allocate home directories for normal users inside /home
			/home/prasad
			/home/babu
	/etc = here we can find os configuration files like settings files
	/var = here system will store the activities logs.
		each and every sec what is happening in system that data updated in /var directory
			who logged in and who logged out, who did what? that and will be there in /var directory




		file management
	=============================
		3 methods to do file mgmt
	
		1. Cat
		2. Vi
		3. touch

1. cat :
========
		create file using cat command
			cat > filename
				
			cat > f1
				creating test file
			ctrl and d  we have to hold ctrl key and press d to save and comeout

	how to view the file content
		cat filename
			cat f1
				or
					cat -n f1

	how to add or append some more content to existing file
			cat >> f1
				adding some more data to f1 file, we are testing cat append option
			ctrl d to save and comeout

drawback in cat is ? we can not modify the existing content. 
			we can create and append but not possible to modify existing content

2. Vi:
=======
	using vi we can create file, we can modify file content and so it advanced to cat

	vi f1

		there are 3 modes inside vi
	============================================
		1. command mode
		2. insert mode
		3. replacement mode

by default we will be in command mode

dd = is for delete cursor position line
10dd = is for delete 10 lines from cursor position to down. 
u = is for undo changes
yy = is for copy cursor position line
20yy = is for copy 20 lines from cursor position to down.
p = past below of the cursor position
:wq = w means save q means quit

i = is for switch to insert mode
esc key = if we press esc key then we can go back to the command mode

	search the word inside file
/word
	n  next position of the word
	N  previous position of the word
:se nu  : it is for set the line numbers for file content
:se nonu : it is for disable the line numbers


3.touch
========
	using touch command we can create empty files

		touch f2 f3 f4
			touch tfile{1..10}


		directory
	=========================
	mkdir testdir1 testdir2


	how to know the file or directory size
	====================================
		du -sh filename
		du -sh directory
	du means disk usage  sh means size in human readable format

how to get the RAM size?
=========================
	free -m
	free -g
	free -k
		or
			cat /proc/meminfo
how to get the cpu's information
=================================
	lscpu
		or
			cat /proc/cpuinfo
how to get the disks information
================================
	lsblk
		or
			lsscsi
				or
					fdisk -l

/dev/sda  is first hard disk
sdb  second hard disk
sdc  third hard disk


how to get the OS version
=========================
	cat /etc/os-release
	hostnamectl status

how to get the computer name
============================
	hostname
		or
			uname -n
how to change the computer name
================================
	hostnamectl set-hostname b28m

how to get the date and time
===========================
	date
	date +%F
	date +%T
	date +"%d-%m-%Y"
how to change date and time
==========================
	date -s "20 sep 2022 08:16:00"

how to copy file or directory from one place to another place?
==============================================================
	cp f1 /mnt/
	copying f1 to /mnt directory
	
	directory
	cp -r testdir1  /mnt/

how to remove
===========
	rm filename
	directory
		rm -r directoryname
move
========
	mv filename /mnt


head and tail commands
======================
	head filename

head is for print first 10 lines of the file
	head -1 filename
		first line 
	head -20 filename

tail filename
	tail prints the last 10 lines of the file
want to print only last line
	tail -1 filename


how to know os architecture
==========================
	arch
how to get the kernel version
============================
	uname -r

how to know the type of file
============================
	file filename


more and less
=============
using more and less commands we can read the file content page by page and also line by line also

	synt : more filename
		more /var/log/messages

			space bar is for to go next page
			enter key for next line
			b = is for go previous page
			q = quit

less /var/log/messages


======================================== disk management - create partition - 21-09-2022=======================================
	task 1 : create disk for virtual machine
			or
		attach disk for virtual machine
			we have document
	task 2 : login to server and refresh the channels
		  lsscsi
		
		echo " - - - " >> /sys/class/scsi_host/host0/scan
		echo " - - - " >> /sys/class/scsi_host/host1/scan
		echo " - - - " >> /sys/class/scsi_host/host2/scan
		echo " - - - " >> /sys/class/scsi_host/host3/scan
	lsscsi
		now we can find new disk here

Task 3 : enter inside disk and create partition
	our disk is /dev/sdb
		sdb is the 2nd disk
	
		fdisk /dev/sdb
			n = create new partition
			p = partition type p=primary
			1 = partition number is one
			enter = menas starting size enter
			+1G = end size is 1 GB that means partition size is 1 GB
		p = print partition table information
	w = save and come out

Task 4 :  update partitions information to kernel
		partprobe /dev/sdb

	kernel i entered inside disk and created 2 partitions inside sdb disk please be aware
Task 5 : assign file system type to new partitions
		mkfs.xfs /dev/sdb1
Task 6 : create one directory and mount partition to directory
		mkdir /app1		
				partition = /dev/sdb1
				directory  = /app1

	mount /dev/sdb1  /app1
	cd /app1
	touch file{1..10}

	how to list out mounted partitions
			df -h
		display file system in human readable format
			df -h /app1

	after reboot of the server the partition will not appear so we have to either mount it again  or add permanent entry in
			/etc/fstab
Task 7: add entry in /etc/fstab file

		manually mounting
		=================
			mount /dev/sdb1 /app1
	adding entry in the /etc/fstab
	=============================
vi /etc/fstab
add below line at last

/dev/sdb1  /app1  xfs   defaults  0  0


:wq save and comeout

=================================================================================================================================
					
	How to delete the partition
==========================================
	Step 1 : un mount the partition
		umount /db2
		umount /db3
	step 2 : enter inside disk and delete the partition
			fdisk /dev/sdc
				d   ==== delete the partition
				2   ===== partition number 2
			w save and comeout
	Step 3 : remove entries from /etc/fstab
		


===================================================================================================================================
						User administration
==================================================================================================================================
	How to create user
	how to modify user
	how to delete the user
	how to set the password for the user
	how to create group 
	how to add user into group
	how to delete the group

				2 types of users
		===============================================
			1. Local user administration
			2. Central user administration

how to create user:
===================
	useradd b1user
how to set the password for user?
=================================
	passwd b1user
		
how to see is the user exist?
=============================
	id b1user


=======================================================================
		User fields

	1. uid 
	2. gid
	
		uid = unique id
			0 - 60000
				0 = root user
				1 - 99 = uid are reserverd for OS users
				100 - 999 = uid are reserved for third part application users
				1000 - 60000 = normal users
		gid = 
			0 = root group
		0 - 60000


who is the default administrator?
	root
what is his home directory?
	/root

for others home directories are allocated in /home
		/home/prasad
		/home/babu


	3. home directory
	==================
		by default home directory is allocated in /home directory
			if user want home directory in different location , that can possible. 
		while creating user we can specify home directory
	4. Shells:
	==========
		sh
		bash
		dash
		csh
		tcsh
		nologin

		software developers will ask csh shell
		linux administrator required sh or bash shell
	
	os means collection of programs
		eg : there are 2000 programs
			all these 2000 pograms are integrated with shells
				1800 programs will work for bash
				1600 programs will work for csh  
			csh shell will have program related programs like run and compile programs that kind of
		

		cat /etc/shells

while creating user we can specify shell, uid, gid and home directory also

		no specifications then it takes details by default
		
		useradd username
			/home/username
			bash
			uid = sequence number
			last user taken 1000, for this user uid will be 1001

		
Creating user with specifications
=================================
		u = uid
		g = gid
		c = comment
		d = home directory
		m = make home directory
		s = shell

	useradd -u 2000 -d /opt/ramu -m -c " ramu linux" -s /bin/csh ramu
			user information will be in /etc/passwd
				to list out all the users
				=========================
					cat /etc/passwd 
				only particular user information
				================================
					grep ramu /etc/passwd

		
creating user without specifications
===================================== 
useradd babu

	

		1.	/etc/passwd  = user information ( Username, his uid, his gid, shell, home directory)
		2.	/etc/shadow  = password information ( usernmae, password , password expairy details)
		3.	/etc/group   = groups information   ( group name and group id and group members)




*** below 3 years experience question
	explain /etc/passwd fields

	there are 7 fields
	username:mask password ,it point out to shadow file:uid:gid:comment:home directory: shell
	  1		2				     3   4       5        6           7

	ramu:x:2000:2000:ramu linux:/opt/ramu:/bin/csh

		

babu:x:1002:1002::/home/babu:/bin/bash
	what is the shell of babu user?     bash
what is the uid of babu?	1002
	what is the comment of babu ?   there is no comment


	for each and every user there will be a one own/primary group or not?		yes
		useradd b28user1
			what is the b28user1 group?  b28user1
		useraddd testuser
			what is the testuser group? testuser

	-g = primary group
	-G = secondary group( one user can be member into n number groups ) but it is not his own group
		which is his own group -g primary group

		gpasswd -a babu siva 
				now babu is member into siva group
		gpasswd -a testuser siva
				now testuser also member into siva group

			siva group is primary for testuser?	no


			Usermod
============================================================
	useradd is for create user
	usermod is for modify the user parameters for existing user

	create user:   -u uid  -G secondary group -c comment -d home directory -m make home directory -s shell

		useradd -u 2002 -G root -c "siva s linux" -d /var/siva -m -s /bin/sh siva


		usermod -u 2003 -G prasad -c " siva c linux" -d /home/sivac -m -s /bin/bash siva


how to modify uid for one of the user?
		usermod -u 10000 siva
how to change shell for siva? 
	usermod -s /bin/sh siva


how to lock the user?
	usermod -L siva
how to unlock the user?
	usermod -U siva

		usermod options:			Useradd options

			-u = uid			-u= uid
			-g  = primary group		-g = primary group
			-G = secondary group		-G = secondary group
			-c = comment			-c  = Comment
			-d = home directory		-d  = home directory
			-m = move 			-m  = make home directory
			-s = shell			-s  = shell
			-L = Lock the account
			-U = Unlock the account
Userdelete
==========
	userdel -r username
		or
	userdel username
			if we specify -r it deletes home directory also
which is recommended ? -r

=======================================================password================================================
	how to set the password ?
		passwd username
	how to check passwd status?
		passwd -S username
-S = status of the password

	how to change the passwd?
		passwd username


how to set password expairy date
		passwd -x 90 siva

	-x = password max age
	-n = minimum age of password
	-w = warning day before password expair
	-l = lock the passsword
	-u = unlock the password

-n = min age
============
	passwd -x 90 -n 2 -w 10 siva

		max = 90
		min = 2
		war = 10

min = next days we can not change the password , minimum 2 days we have to use same password 
		today i set password so next 2 days it will not allow to change the password

war = we will get reminder or notification about your password expairy
		max is 90
		war is 10
		  expairy notification start from 80 day
						   81 day
						    82 days it keep remind



[root@b28m2 ~]# passwd -S siva
siva PS 2022-09-25 2 90 10 -1 (Password set, SHA512 crypt.)


	username   
	PS = password is set
	LK = password is locked
	2022-09-25  = password set date
	2 = password min age
	90 = password max age
	10  = warning days
	-1 = -1  password never expair
		
	(password set, SHA512 Crypt)  = algorithum of password

	
	passwd -S siva
		or
	chage -l siva


===================================== Group administration ============================
	how to create group
		groupadd unixgroup
	how to add user into unixgroup
		gpasswd -a username unixgroup
	how to delete user from group
		gpasswd -d username unixgroup
	how to add multiple users into group
		gpasswd -M user1,user2 unixgroup


usermod command to modify user parameters
groupmod command to modify group parameters

			group will have only 2 parameters to modify
					1. gid
					2. groupname
	groupadd -g 1011 unixgrp1
	groupmod -g 1022 unixgrp1
	groupmod -n newname existingname
		groupmod -n unixgrp2 unixgrp1
	groupdel unixgrp2
			
			user parameters
		==============================
		1. uid
		2. gid
		3. secondary group id
		4. home directory
		5. comment
		6. shell
	

		pavan primary group is unixgrp
		prasad can be member into unixgrp
			for prasad unixgrp is the secondary group


/etc/shadow  fields
===================
user2:!!:19262:0:99999:7:::

username :  encrypted password   : days counting from jan 1970 : Min age : Max age : War days : Account expairy : paswword inactive 
  1                 2			3			    4         5         6	  7			8

1st field = Username
2nd field = password but password will be in encrypted
		!!  = No password
		!!07abxdfedafkfjl: password is there but locked
		!07abxdfedafkfjl: password is there but account is locked

  !! = no password
  !!encrypted = password is locked
   !encrypted = account is locked



		90 days  expairy 
		19262 on this day password has been set so password should expair on 19352

4th field: Minimum age
	user can not change the password within min days
5th field : max age 
	password expairy
6th field : warning days of password expairy
7th field : account expairy
8th field : password inactive days



going forward all the users home directory should create in /opt and shell should be /bin/csh
=============================================================================================
	vi /etc/default/useradd
		HOME=/opt
		SHELL=/bin/csh

	useradd u4
what is the shell of u4?  /bin/csh
what is the home of u4? /opt/u4

for upcoming users password expairy days should be 60 days?
===========================================================
		vi /etc/login.defs

		PASS_MAX_DAYS   60
		PASS_MIN_DAYS   3
		PASS_MIN_LEN    5
		PASS_WARN_AGE   10

useradd u5?
what is the max password age for u5?


as soon as we enter useradd username these command take 2 files inputs and create the user
			it assign the default parameters as per /etc/default/useradd and /etc/login.defs



passwd -x 200 -n 2 -w 10 u5

chage -M 200 -m 2 -W 10 u5


***** how to create user and set password and enable next login ask to change the password
	as soon as enter current password it should prompt for change passsword
		passwd u5
			or
				echo "u5:test123"|chpasswd
		chage -d 0 u5


how to delete the password ?
	passwd -d username

  




useradd -u 10000 -G root,unixgrp -d /home/babu -m -c " babu linux" -s /bin/sh  babu


	useradd u1





default home directory files:
============================
1= .bash_history
2= .bash_logout  
3= .bash_profile  
4= .bashrc

for each and every user will have seperate above four files

1 = .bash_history
=================
	it contains that particular user executed commands

2 = .bash_logout
================
	something should execute while user is logout
		that kind of tasks or commands can configure in .bash_logout

	eg: before logout
		it should delete /tmp/b3/*
		tmp data has been deleted , thanks for using system
		 bye

touch /tmp/b3/f1
[b3@b28m2 ~]$ cat .bash_logout 
# ~/.bash_logout
rm -rf /tmp/b3/*
echo " Hi $USER , tmp data has been deleted"
echo " thanks for user system $HOSTNAME"
echo " Bye $USER"

3 = .bash_profile
==================
	something should load are execute when user login
that kind of setting we do in .bash_profile or .bashrc


	vi .bash_profile

echo " Welcome to $HOSTNAME "
echo " Please be carefull when you switch to root user"
alias l="ls -a"
alias t="cd /tmp"




su - username

su = switch user 

 how to list out currently logged in users?
		who
		users
		w

======================================================links=====================================================================
		creating shortcut for files and directories
			1. soft link
			2. hard link

		eg for hard link: 
				ln /sourcepath   /destinationpath
 		eg for soft link:
				ln -s /sourcepath  /destinationpath

inode: is the unique number for each and every file/directory.
	ls -i /filename
			or
		stat /filename


both the links are for create link.

***** ( below 3 years)
	Difference between softlink and hard link


			HARD LINK						SOFT LINK
====================================================================================================================================
1. Inode number will be same for original and linked file	1. Inode number will be different for original and linked file
2. using hard link not possible to create link for directories	2. Using soft link we can create link for files and directories
   using hard link can possible to create link only for
		files not for directories
3. can't possible to create link across the partitions		3. using soft link can possible to create link across the partitions
		eg : /boot file can not possible to create link
		in /
	because / and /boot are different partitions so hard link
	will not support 

4. orinal and linked file size will be same			4. linked file size will be very minimal. it occupy the size based
									file name characters.

5. linked files will access if original deleted also		5. linked files will not accessible incase original is deleted

		if we modify linked or oginal the data will reflect in both the placeses



how to unlink:
============
	unlink /linkedpath

ln -s /etc/fstab /

	cd /
	ls -l

unlink:   unlink /fstab

==========================================Permissions ===========================================================================
	Owner
	group
	others


		read	= open/read the data
		write	=  add the content to file or delete the file or modify the file content
		execution = run/compile/execute



	Owner     groupmembers     others

for owner what permissions are there
for group members what permissions are there
for others what permissions are there

ls -l
======
drwxr-xr-x.   2 root root    6 Sep 20 03:56 testdir2
-rw-r--r--.   1 root root    0 Sep 20 03:55 tfile1
lrwxrwxrwx.   1 root root    8 Apr 23  2020 sbin -> usr/sbin

-rw-r-----.   1 prasad prasad    0 Sep 20 03:55 tfile2

d = directory
- = file
l = linked
		root directory(755)

owner	  	groupmembers			others
Permisions	 permisions			Permisions
===========================================================
rwx 	    	 r-x	 	      		   r-x
421		 4 0 1				   4 0 1 
 7		  5				     5		

		root files(644)

owner	  	groupmembers			others
Permisions	 permisions			Permisions
===========================================================
rw- 	    	 r--	 	      		   r--
420		 400				   400
6		  4				    4		

		
				r=4
				w=2
				x=1
					u = owner
					g = group
					o = others
					


useradd -d /opt/babu -m babu


			Permissions 
			-rw-rw-r--. 1 prasad prasad 12 Oct  3 07:25 /tmp/tfile

long list of file or directory
==============================

		8 fileds

	1: type of the file
	====================
		- =  file
		d = directory
		l = Linked file/directory
	2: permissions
	===================
		rw-rw-r--
		u   g  o
		
	u = owner permissions
	g = group members permissions
	o = others permissions . whoever not owner and not member into group that user comes under others category

	3. hard link counts
	==================
		1 no links
		2 one link is there
		3 2 links are there
	4. Owner:
	========
		owner of the file/directory
	5. group on file or directory:
	=============================
		what is the group applied on file or directory. 
	6. size of the file in bytes
	============================
		8 bits = 1 Byte
		1024 bytes = 1 KB
		1024 KB = 1 MB
		1024 MB = 1 GB
		1024 GB = 1 TB
		1024 TB = 1 Peta byte(PB)
		1024 PB = 1 exa byte (EB)
	7. file create or modified date and time
	========================================
	8. file or directory name
	=========================

ls -ld /tmp/tfile

ls -ld
	-l long list
	d = details of the file or directory




===================================================================================================================
		root creates file  644 permissions will come
		root creates directory 755 permissions will come

		normal user creates file 664 permissions will come
		normal user creates directory 775 permissions will come


	root
	====
		file  = 644
		dir   = 755

	normal users
	============
		file 	= 664
		dir 	= 775

	

	umask
==================
	mask the default permissions
	control the default permissions

						file
		=====================================================================
				666		777
				022 umask	022 umask
				===		===
				644  		755

what is the umask of root user?  022
what is the umaskof normal users? 002

							666		777
							002		002
							===		===
							664		775


	suppose if i increase umask value like 000 whatis the meaning?
			666
			000 umask
			===
			666  owner full , group members full and others full permissions

			now umask changed to 077
				777
				077
				===
				700  no permissions to group members and others

*** what are the default umask values for root and other users?
		root umask is = 022
		others umask is = 002
*** explain about umask
	umask is the controller in default permissions.
	using umask we can controll the default permissions.

	eg : if we set umask is 000 that menas full permissions whaterver he creates
			suppose 077 that means only owner will have permissions no permissions to group members or others

default umask values will be in /etc/profile
	

	su - prasad
		umask 000

	touch file33
		ls -ld file33
		  full permissions because what was the umask 000 
				777
				000
				===
				777
				
		

	002 

this is my new umask value	057
	777
	027
	===
	750

      
	002  default when 002 is there what permissions group members will have on file
			group members will have read/write permissions.


	077 group members and others doen't have permissions


chmod 700 file1


		     uid	umask
	   appuser  2000	 002

	  change uid to
		usermod -u 198 appuser

	002  = uid is < 199 then 022
	022  = uid is > 199 means then 002


 

	/etc/profile   			====> global environment configuration file
	/home/prasad/.bash_profile      ====> individual environment configuration file
	/home/babu/.bash_profile
				
	vi /home/prasad/.bash_profile
		umask 077

	the above umask will applicable only for prasad user


		commands to change the permissions
	=================================================
		chmod 777 filename
			granting full permissions to all
		chmod 600 filename
			now want to give only execution permissions to group members
			chmod 774 filename

			
		char based

		chmod u+rwx filename
		chmod g+w filename
		chmod o+w filename

			chmod g-w filename
		removing write permssions to group members
	
	chmod 700 *
		chmod 700 file*



		owner   group others
now requirement is how to provide permission to one user?
		ACL
			access control list
		how to provide access to one user  and how to provide permissions to one group



How to set umask for individual users:
=====================================
	su - prasad
	vi .bash_profile
		umask 077

	source .bash_profile

how to check what is the current umask value?
	umask


owner can change permissions on his files/directories?

		chmod 777 file/dir
		chmod u+x,g+wx file




		chmod is permissions				chmod 700 file
		chown is change owner from one to another	chown babu:unixgrp file
	
		chgrp is for change only group on file or directory    chgrp unixgrp testfile


	
================================================ACL ==================================================================
	Access control list

	access will be in control

to whom we are giving access and what permissions we are giving for individual users that will be in control if we go with acl.

	  owner
	  group member
	  others

		no individual users

using we can provide access to individual user on file or directory.


	chmod 700 /criticaldata
	   owner =  root
	   group = root

	want to provide rwx permission to prasad user. how?

		setfacl -R -m u:prasad:rwx /criticaldata

	how to get the acl permissions on particular directory?
		getfacl /criticaldata

	how to provide access to particular group?
		setfacl -R -m g:unixgrp:rx /criticaldata

	how to remove one user from acl list?
		setfacl -x u:username /criticaldata
	
  -x exclude the user from acl list

	how to cleanup all acl permissions on directory
		setfacl -b /criticaldata

==================================================================Sticky bit==============================================

	normal permissions = chmod
	special permissions = acl , sticky bit, setuid and setgid

requirement:
	all the users should be use one of the directory but each other should not delete others data.

		mkdir /officework
		chmod -R 777 /officework

	every one has access on /officework  directory or not ? yes


how to apply sticky bit on folder

		chmod -R 1777 /officework
			or
		chmod +t /officework

how to identify is sticky bit is applied or not
		ls -ld /officework
		drwxrwxrwt    here there will be a t in others category permissions

		  rwt
how to remove sticky bit permissions on directory?
		chmod -R 0755 /officework
			or
		chmod -t /officework

==================================================================================================================================
					GREP
grep is for search string or word in file or files

	grep is for search word in file

	search the word
		grep -w "prasad" /etc/passwd
	count the word in file
		grep -c "prasad" /file1
	how to search string with ignore case sensitive
		grep -iw "prasad" /file1
		grep -ic "prasad" /file1
-w = word search
-c = count the word in file, how many times it repeated
-i = ignore case sensitive and find word
-n = find the word with line number. it tells in which line string is exist
-v = for exclude one word from output

	grep -wn "prasad" /file1

how to search multiple words
		grep -w "word1\|word2\|word3\|word4" /file1

how to exclude from output
grep -w "prasad\|babu\|siva" /etc/passwd |grep -v "siva c"



		ls -l

-l long list output
	like permissions owner group hard links size when it created filename
-lt long list with sort files with creation or modify time.
	 recently created or modify will be top
-ltr long list with sort with recently created date and time but reverse the output


		ls -ltr

	see hiden
		ls -altr


		useradd pavan
			userinformation will store in /etc/passwd, /etc/shadow and /etc/group
			userhome directory stores in /home
			





=========================================================Find =====================================================================

using find command we can search file or directory in the system.

	grep = grep is for search word in file or files
	find = find is for search file itself in server(system)


	options
	=======
	1. name  and iname   i means ignore case sensitive in name
	2. size
	3. owner(user)
	4. group 
	5. modify time 
	6. mmin (modified files with in minites)
	7. access time

	if you remember name of the file or directory then we can go with name option
	if you remember size of the file or directory then we can go with size option

	
syntax:
=======
		find <path> <option> <fullfill the option>
Name:
	find / -name tfile
	find / -iname tfilebyprasad

size: 
	empty files
	how to find out empty files or find out zero size files
	
	find /opt -type f -empty
				type f = files
				typde d = directories
					nothing specified means both


	find out empty files and delete

		find /opt -type f -empty -exec rm -rf {} \;

		
	create file with size
		dd if=/dev/zero of=/mnt/file1 bs=1k count=1M
			1024 kb * 1024 = 1 GB

	2 gb file
		dd if=/dev/zero of=/file10 bs=1k count=2M


	find out file size between 1 GB to 3 GB
		find / -type f -size +1030M -size -3G


find out greater than 1 GB files and delete
		find / -type f -size +1G -exec rm -rf {} \;

how to find out files with owner?
		
		find out all prasad user files
	
		find / -type f -user prasad 

how to find out all files with unixgrp group
		find / -type f -group unixgrp

find out unixgrp group files and change owner to root group
		find / -type -f -group unixgrp -exec chgrp root {} \;




===========================================================
	grep -w "error" filename | grep -v prasad

	find out error word in filename and exclude prasad word incase error and prasad both are there in same line



&&
&
|


		find and do

		find / -size +1G -exec rm -rf {} \;

&& = using and do

		we can run multiple commands in sequence order with relationship

			cmd1 && cmd2 && cmd3 && cmd4

					cmd2 will not execute if cmd1 fails
				cmd4 will execute if cmd3 fails? no


;  = we can execute multiple commands at a time

	cmd1 ; cmd2;cmd3;cmd4

	there will not be any relationship between cmd1 to cmd2. all the commands will execute individually.


|  = using pipe we can execute multiple commands
			
			cmd1 | cmd2 | cmd3 | cmd4 | cmd5

		cmd2 will depend on cmd1 output

		cmd1 will execute and redirect that output to Pipe symbol then cmd2 take that output and execute
			next cmd2 output will redirect to pipe symbol and then cmd3 will execute based on cmd2 output which is there 
			in the pipe symbol

	there is relationship between commands
			cmd2 will take command1 output then execute


	grep -w "prasad" file1 |grep -v "sanepalli" | grep -v "siva prasad"

		suppose one of the line like
				siva prasad is working in IBM
				prasad babu also working in IBM
	only second line will print





-mtime: modify time(days)

	we can search file or directories based on creation or modify time stamp


	find / -type f -mtime +365

		list out files which are created or modified older than 1 year

	
	find / -type f -mtime +30 -mtime -60
			the above command is for find out older than one month modified files with in 2 months

			eg : todays date is 07 oct 2022 
				the above command will find out  sep 7 2022 to aug 7 2022


***** want to find out older than 1 month logs and delete them in /var/log directory?
		find /var/log -type f -mtime +30 -exec rm -rf {} \;

-mmin: modify min

	want to find out older than 2 hours data and delete
		find /var/log -type f -mmin +120 -exec rm -rf {} \;



what are the files accessed older than 5 months
		find /var/log -type f -atime +150

		with in one hours what are files accessed or opened not modified
			find /var/log -type f -amin -60



locate : we can search file or directory with name based in full system.
		locate filename

***** difference between find and locate

	find will go to each and every path and search for file
	locate will search only inside os db not to paths

*** which is fast to find out filename?
		locate 
	why locate is faster than find?
		find has to go individual paths and find out data
		but locate will check only in os db so locate is fast


		/home/siva  700  owner siva
					ramu
	ramu is executing find command
		find / -type f -name testfile 
			the find command will not access the /home/siva because he don't have access for /home/siva directory

=====================================================LVM=======================================================================
	Logical volume manager

	how to list out disks?
		lsblk
			or
				lsscsi


		/boot
		/
across the the partitions link not possible using hard link

	whoami
		root
		umask 000
it will apply only for root 
if you modify /etc/profile
		
	
		volume and disk both are same



				Disk Management
	==============================================================
		3 methods to do disk management

			1. Basic method using fdisk command we can create and delete the partition
				max how many partitions we can create in single volume(disk) 64 partitions

			2. LVM (logical volume manager)
				this is advanced volume manager , it has more features compare to basic method

			3. MDADM ( this is also volume manager)


1. Basic method:
===============
	how to create patition using basic method

	step 1 : create disk for virtual machine
		open vmware work station ==> right click virtual machine(vm) ==> settings==> add ==> select disk ==> continue

	Step 2 : login to server and refresh the channels
			echo " - - - " >> /sys/class/scsi_host/host0/scan
			echo " - - - " >> /sys/class/scsi_host/host1/scan
			echo " - - - " >> /sys/class/scsi_host/host2/scan
			echo " - - - " >> /sys/class/scsi_host/host3/scan
			echo " - - - " >> /sys/class/scsi_host/host4/scan
			echo " - - - " >> /sys/class/scsi_host/host5/scan


	now disk should apear
		lsblk 


	step 3 : enter inside disk and create partition
		fdisk /dev/sdd
			press n to create new partition
				n ==> p ==> 1 ==> enter ==> +1G ==> enter
	how to list out the partitions? 
			type the p 
	w is for save and come out fromt he disk


	Step 4 : update to kernel about partitions
			partprobe /dev/sdd
	step 5 : format the partition
		mkfs.xfs /dev/sdd1
	step 6 : create new directory and mount partition to new directory
			mkdir /app3
			mount /dev/sdd1 /app3
			df -h
			   or
			df -h /app3



8 bits = 1 byte
	1024 bytes = 1 KB
	1024 kb = 1 MB

1 sec = 512 bytes
	1 sector = 1/2 kb

2048 sec
1024 kb = 1 MB
			
	



		gpasswd -a username groupname
			this is for add single user into group
		gpasswd -M existingusers,newuser1,newuser2,newuser3  groupname
			adding multiple users in group along with existing uers


echo "password:username" | chpasswd

			


			Advantages of LVM
	===========================================

1. scalup(extend) the partition space in online
		we can extend partition space without unmount the partition. that means we can increase the partition space in online
2. Snapshot of LV
	we can take the snapshot(backup) of lv(partition) in online

	online : perform any task or activity like increase and taking backup without unmount or interupt the partition,
			 that is nothing but online 

		eg: some one is creating files inside partition same time we are able extend partition space this is online
	offline : interupt some one task and perform activity
			eg : unmount the partition and increase partition space this is offline

		during offline partition will not be accessible, because it is unmounted.

3. Max we can create 29932 partitions(lvs)
4. LVM partition can support cluster

==================================================================================================================================

				LVM architecture
	==========================================================

	disk converted as a pv ==> pv(physical volume) can add into vg(volume group) ===> from volume group lvs can be created.

	
		disk ==> pv ==> vg ==> lvs

pv = physical volume
vg = volume group
lv = logical volume

	 vg = collection of pvs
	 lv = is nothing but small partition from vg


	want to create new lv but there is no free space in vg? 
		how we can get free space in vg

		get the new disk ===> pv ==> extend the new disk into existing vg

			newdisk ==> pv ==> vg


Step 1 : get the disk for virtual machine
	go to vmware workstation and click on vm and right settings

			vm ==> settings ==> add ==> disk next next next

		
	created lv partition
	====================

		pvcreate /dev/sdc
		pvs
		vgcreate appvg /dev/sdc
		vgs
		lvcreate -L 3G -n lv01 appvg
		mkfs.xfs /dev/appvg/lv01
		mkdir /tapp1
		mount /dev/appvg/lv01 /tapp1


How to delete disk from OS
=========================
	echo offline > /sys/block/sdc/device/state
	echo 1 > /sys/block/sdc/device/delete
	vm ==> settings ==> click on the disk ==> delete



	
	How to convert disk as pv
		pvcreate /dev/sdc
	how to list out existing pvs
		pvs
	how to create vg
		vgcreate appvg /dev/sdc
	how to list out vgs
		vgs
	how to create lv
		lvcreate -L 3G -n lv01 appvg

		-L label the size for lv
		-n name for lv
	how to list out lv information
		lvs

	
		Creating lv
===============================
	step 1 : get the disk
		vm ==> settings ==> add

	step 2 : login to server and refresh the channels for newly connected disks
		echo " - - - " >> /sys/class/scsi_host/host0/scan
		echo " - - - " >> /sys/class/scsi_host/host1/scan
		echo " - - - " >> /sys/class/scsi_host/host2/scan
		echo " - - - " >> /sys/class/scsi_host/host3/scan
		echo " - - - " >> /sys/class/scsi_host/host4/scan
		echo " - - - " >> /sys/class/scsi_host/host5/scan

	step 3 : convert disk as a pv
			pvcreate /dev/sdc
	step 4 : create new vg
			vgcreate appvg /dev/sdc
	step 5 : create lv
			lvcreate -L 3G -n lv01 appvg
	step 6 : format or assign file system type to partition
		mkfs.xfs /dev/appvg/lv01
	step 7 : create new directory and mount partition(lv) to new directory
			mkdir /prasadapp
			mount /dev/appvg/lv01 /prasadapp

	step 8 : list out mounted partitions
			df -h
			or
			df -h /prasadapp

Extend the partition space
=========================
	requirement : need to extend 6 GB space to lv01 partition
	step 1 : make sure 6 GB free space is availble in appvg
		how to check vg information
				vgs
		observ the vfree last column


if there is 6 GB free space then stright away below command
		lvextend -L +6G /dev/appvg/lv01 -r

	-L Label the size 
	-r resize 2 fs
	to reflect the size to lv

if there is no 6 GB free space in appvg then 
		get the new disk
		login to server and refresh the channels
		convert disk as a pv
			pvcreate /dev/sdd
		add new disk into existing vg
			vgextend appvg /dev/sdd
	after adding new disk (/dev/sdd) into appvg now we got free space
		vgspace got extended

How to remove lv,vg,pv
=======================
step1 : unmount the partition	
	umount /prasadapp
step 2 : remove the lv
		lvremove /dev/appvg/lv01 -f
step 3 : remove the vg
		vgremove appvg -f
step 4 : remove pv
		pvremove /dev/sdc
disable the disk
	echo offline > /sys/block/sdc/device/state

delete the disk at os level
		echo 1 > /sys/block/sdc/device/delete
		vm ==> settings ==> click on the disk ==> delete
========================================================================================================================
	Platforms
============================
	1. Physical
	2. Virtual 
	3. Cloud vm

	Scenario 1 : how to get disk for physical
	Scenario 2 : how to get disk for virtual machine
	scenario 3 : How to get disk for azure virtual machine





	DC
=================
data center
   this is the place where we maintain servers and infra components(servers,network components,Load balancers, storage box)


Data center ==> RACKS ==> servers,storage box,routers, switches

SAN = Storage Area network
	collection of disks


     By default there will be a 1 hard disk for each server
		how we can add additional disk for server?
				right vm ==>

					



1. Physcial platform:
=====================
		physical server ==> redhat os this is physical platform

2. Virtual platform
===================
		physical server1 ==> virtualization os(esxi os) ==> vm1 => redhat os
		physical server1 ==> virtualization os(esxi os) ==> vm2 => redhat os
		physical server1 ==> virtualization os(esxi os) ==> vm3 => redhat os
		physical server1 ==> virtualization os(esxi os) ==> vm4 => SuSE OS
		physical server1 ==> virtualization os(esxi os) ==> vm5 => redhat os
		physical server1 ==> virtualization os(esxi os) ==> vm6 => redhat os
		physical server1 ==> virtualization os(esxi os) ==> vm7 => redhat os
		physical server1 ==> virtualization os(esxi os) ==> vm8 => Windows 2019 OS
		physical server1 ==> virtualization os(esxi os) ==> vm9 => redhat os

		physical server2 ==> virtualization os(esxi os) ==> vm10 => redhat os
		physical server2 ==> virtualization os(esxi os) ==> vm11 => SUSE 15 OS
		physical server2 ==> virtualization os(esxi os) ==> vm12 => redhat os
		physical server2 ==> virtualization os(esxi os) ==> vm13 => SuSE OS
		physical server2 ==> virtualization os(esxi os) ==> vm14 => redhat os
		physical server2 ==> virtualization os(esxi os) ==> vm15 => redhat os
		physical server2 ==> virtualization os(esxi os) ==> vm16 => redhat os
		physical server2 ==> virtualization os(esxi os) ==> vm17 => Windows 2019 OS
		physical server2 ==> virtualization os(esxi os) ==> vm18 => redhat os
		physical server2 ==> virtualization os(esxi os) ==> vm19 => redhat os
		physical server2 ==> virtualization os(esxi os) ==> vm20 => redhat os


	     TEAMS
	==================
		OS Team    (linux,windows)
		Storage team
		backup team
		Network team
		application team
		Data base team


red hat 7 and rehdat 8 is what? OS or application
		OS

linux is a operating system
windows is a operating system


	notepad  is a application or software
	what'sup is a application or software


	OS team
======================
	Unix team
		redhat engineer
		AIX engineer
		HP engineer
	windows
		window os administrator
		vmware engineer


SAN Box will be in which team control? storge team




  
			Organization level
				Physical platform
				virtual platform ( vmware=esxi os, Microsoft= Hyper-v, citrix= citrix OS )
				cloud platform    (Amazon = AWS, Microsoft=Azure cloud, google= gcp)





		file1   prasad   unixgrp 

	chown babu file1
		
			file1   babu   unixgrp
	chgrp linuxgrp file1
			file1    babu   linuxgrp


	chown rajesh:root  file1

			file1   rajesh   root 


			6 6 0
			
	rajesh and root group memebers can access this file no others


			app team1
			app team2
			db team
			app team3
application team opened ticket with Linux team like we need 2 TB partition. details are below
	mount point name is /app21
	Size = 2 TB
to get disk we follow below scenarios
if server is physical then follow Scenario 1,
if server is virtual then follow scenario 2,
if server is cloud then follow scenario 3.
===========================================================================
Scenario 1 : How to get disk for physical server

	Step 1 : if server is physical then we fill the storage request form and open case with storage team.
		in storage request form we fill like server name,wwn details and required size
	how to get the wwn in server
		systool -c fc_host -v| more
		host0 = HBA Card 1===> FC Cable=====> SAN SWitch 1 ====> SAN Box1
		host1 = HBA Card 2===> FC Cable=====> SAN SWtich 2 ====> SAN Box1
		host2 = HBA Card 3===> FC Cable=====> SAN Switch 3 ====> SAN Box1
		host3 = HBA Card 4===> FC cable=====> SAN Swtich 4 ====> SAN Box1
	
	Step 2 : once storage team confirms back like lun is mapped to HBA CARDS then we login to server and refresh the channels

		if we have 2 hba cards then i will refresh 2 hosts that is host0 and host1
		
		/sys/class/fc_host/host0/scan   ========> this is which hba card? HBA card 1
		/sys/calss/fc_host/host1/scan   ========> this is which hba card? HBA card 2

	we have 2 hha card so we will refresh host0 and host1.
			echo " - - - " >> /sys/class/fc_host/host0/scan
			echo " - - - " >> /sys/class/fc_host/host1/scan

	if we have 4 hba cards
			echo " - - - " >> /sys/class/fc_host/host2/scan
			echo " - - - " >> /sys/class/fc_host/host3/scan


- - -


		T      C     L

T = Target(hba card)
C = channel ( san switch)
L = Lun


			now we should able to see 2 disks

			lsblk 
				/dev/sdd  2 TB
				/dev/sdf  2 TB


	Step 3 : create common name for newly connected lun
			/dev/sdd
			/dev/sdf

			multipath -ll
				this command will give lun details 
	
		Task 1 : note down the lenghy number and open /etc/multipath.conf file

		Task 2 : here we will update lenghy number with common name(disk2)

		
multipaths {
multipath {
wwid360060e801532bc00000132bc00009080     -- new lun id
alias disk2
        }
}

		Task 3 : restart the multipath service
			systemctl restrat multipathd
				or
			multipath -r

	-r refresh



	Step 4 : create pv using newly create common name
			pvcreate /dev/disk2

	
==================================================================================================================================
			
how you will create common name? we will execute multipath -ll command to get the lun number then notedown that number and update 
			in /etc/mutipath.conf file then we will refresh multipath using multipath -r  or
					systemctl restart multipathd
how to see the lun number? multipath -ll
how to see the common name for luns? multipath -ll
what is the configuration file of mutlipath? /etc/multipath.conf


how to identify which recently connected lun?
	before we refresh channels we will note down the existings disks
		/dev/sda
		/dev/sdb

after refresht the channels we got like
		/dev/sdc
		/dev/sdd
now we will run multipath -ll
		here we can sdc and sdd under one logican number



		/dev/sda
		/dev/adz
		/dev/sdaa
		/dev/sdab


lsblk >> /disksoutput









storage team steps: we no need to explain these steps to interview panel

		storage team will download the storage request form which is there in ticket
		storage admin will create LUN based on size requirement
			
				create lun in one of the group
					format the lun , he will get one unique number for each and ever lun after format the lun
		storage admin will map that lun2 to 2 hba card

			lun2(2 TB) ===============> hba card 1
			lun2(2 TB) ===============> hba card 2
			lun2(2 TB) ===============> hba card 3
			lun2(2 TB) ===============> hba card 4

				/dev/sdb  2 TB====> /dev/disk2
				/dev/sdc  2 TB====> /dev/disk2
				/dev/sdd  2 TB====> /dev/disk2
				/dev/sde  2 TB====> /dev/disk2

		pvcreate /dev/sdb  or pvcreate /dev/disk2

			correct one is /dev/disk2


***** How to get disk for virtual machine

	Step 1 : create ticket with vmware team for new disk
		we will specifify following details in ticket
			1. Server name   2. Required size for new disk
	Step 2 : convert new disk as pv once vmware team confirms like disk is connected
		pvcreate /dev/sdd


or
	we have access to vcenter so we can create disk our self and create ticket also for tracking purpose
	once disk is connected to server then i will convert disk as pv

***** How to get disk for azure virtual machine
		Step 1 : create ticket with cloud team for new disk
		we will specifify following details in ticket
			1. Server name   2. Required size for new disk
	Step 2 : convert new disk as pv once cloud team confirms like disk is connected
		pvcreate /dev/sdd


or
	we have access to vcenter so we can create disk our self and create ticket also for tracking purpose
	once disk is connected to server then i will convert disk as pv
	

=================================================================================================================
Scenario 1 : 
***** explain me lvm partition creation from scratch.
	Step 1 : we co-ordinate with vmware team to get the disk if server is virtual
		here we open ticket with vmware team with server name and required size.
		azure:
	===================
		I have access to azure portal so myself attach new disk to vm

	Step 2 : login to server and check for new disk using lsblk
		if new disk is appears then convert as a pv using pvcreate command
			eg : the new disk is /dev/sdd
		using pvcreate command i will convert /dev/sdd disk as a pv
				pvcreate /dev/sdd
	Step 3 : i will create new vg using new pv
			eg : vgcreate appvg /dev/sdd
	     now vg is created
	Step 4 : I will create lv in appvg using lvcreate command	
			eg : lvcreate -L 50G -n lv01 appvg
		here -L means labeling the size for lv
		and -n means name of the lv
	   now lv is created with 50 GB
	Step 5 : format the lv usiing mkfs command
		mkfs.xfs /dev/appvg/lv01
	step 6 : create directory as per request and mount this lv to that directory
			eg : mkdir /app1
			and
		mount /dev/appvg/lv01  /app1
	step 7 : I will add these partition details in /etc/fstab to make it permanent
		eg:
		device name    mountpointname    filesystemtype  permissions  fsbackup  fscheckup
		/dev/appvg/lv01   /app1           xfs              defaults     1         2




/etc/fstab fiedls:
===================
6 fields

	1. devicename (lvpath)
	2. Mount point name (directory) where this partition should mount
	3. File system type (ext2, ext3, ext4, xfs)
	4. permissions ( default)
	5. file system meta data backup    1 take the backup of file system meta before server shutdown
					   0  don't take the meta backup before shutdown
	6. file system checup or repair
				0 = don't repair the file system while server coming up
				1 = Repair the file sytem while server booting ( sequencialy checkup one by one file system checkup)
				2 = Repair the file system while server booting ( parlel checkup the file systems)


		/dev/vg1/lv02   /tbkp   xfs   defaults 1  2
		/dev/vg1/lv03   /app22  xfs   defaults 0  1
		/dev/vg2/lv04    /app33 xfs   defaults 0  1
		/dev/vg2/lv05    /app44  xfs  defaults 1  2

	lv02 and lv05 both file systems checkup will start sametime because we mentioned 2
	lv03 and lv04 will repair one after one
		first lv03 once reapir completed for this then it start for lv04

					
*****  How to extend the partition space
========================================

	Step 1 : we have to get the vg name of lv. I mean lv is part of which vg, that we can get in df -h 
		device name will be like
			/dev/vgname/lvname

		/dev/mapper/dbvg-dblv01
		what is the vgname? dbvg
	Step 2 : I will verify is there enough space in vg to extend partition space.
			vgs

		suppose we got requirement like extend 100 GB space to partition so how much free space should be in vg? 100 GB

	True= If there is enough space in vg then stright away extend the partition space using lvextend command.
			lvextend -L +3G /dev/dbvg/dblv01 
			xfs_growfs /dev/dbvg/dblv01

				or
			lvextend -L +3G /dev/dbvg/dblv01 -r

		if we mention
 -r at the end of lvextend  then no need to execute xfs_growfs command
	False = if there is no enough space in vg then
		
 ***** How to know is the server is physical,virtual or cloud
		dmidecode -t 1
	
		we coordinate with platform team to get the disk
			if server is physical then we open ticket with storage team along with storage request form
				once lun is mapped with server then we refresh the channels and create alias name for lun
				and then we convert alias to pv and then finally add new pv into existing vg
				now we got enough space in vg.
			if server is virtual  then we open case with vmware team to get the new disk
				once the disk is connected to server then we convert disk as a pv then add new pv into existing vg
				now we got enough space in vg.
			if server is cloud then we open case with cloud team to get the new disk 
				once the disk is connected to server then we convert disk as a pv then add new pv into existing vg
					now we got enough space in vg.


	server is virtual 
		then once disk is connected to server i will convert that new disk as pv
			pvcreate /dev/sdg
		then i will add this new pv into existing vg
				vgextend dbvg /dev/sdg
		now got enough space in vg so we can extend partition space 
		
			lvextend -L +3G /dev/dbvg/dblv01 -r


================================================================

	dbvg
	appvg

/dev/sdb
	/dev/sdb1  ===> pvcreate /dev/sdb1 ==> vgextend dbvg /dev/sdb1
	/dev/sdb2  ===> pvcreate /dev/sdb2 ==> vgextend appvg /dev/sdb2
	/dev/sdc2  ===> pvcreate /dev/sdc2 ==> vgextend appvg /dev/sdc2


	Create lv with ext4

			lvcreate -L 2G -n dblv02 dbvg
			mkfs.ext4 /dev/dbvg/dblv02
			mkdir /db02
			mount /dev/dbvg/dblv02 /db02

	extend the ext4 partition space
			lvextend -L +1G /dev/dbvg/dblv02 
		ext4=	resize2fs /dev/dbvg/dblv02
		xfs =   xfs_growfs /dev/dbvg/dblv02

			
***** how to reduce partition space 
	we can not reduce partition space if lv is created with xfs file system type
	if partition is created with ext3,ext4 then we can reduce the partition space

Reducing partition space if partition is created with ext3 or ext4 
		Step1 : unmount the partition 
			umount /db02
		Step 2 : repair the file system
			e2fsck -f /dev/dbvg/dblv02 -y
	
	fsck = file system check up
		xfs = xfs_repair /dev/dbv/dblv02

		step 3 : adjust the lv space
				current size of lv is 3GB we deided to take out 2 GB space, so how space will remain in existing lv ?
						 1 GB
				resize2fs /dev/dbvg/dblv02 1G

		step 4 : reduce the lv size
			lvreduce -L -2000M /dev/dbvg/dblv02 

		Step 5 : mount it back the partiton
				mount /dev/dbvg/dblv01 /db02


		3 GB partiton and 2 GB is utilized how is free in partition? 1 GB
			how much we can take out from this partition? 1 GB

we can not reduce xfs partition space but there is alternative method
	that is 
			backup the partition
			remove the partition
			 create the new partition with new size
			 restore the partition data

current lv size is 200 GB
	decided to reduce partition space to 100 GB  in this case what is the new lv size? 100 GB

		step 1 : backup the partition
			xfsdump -f /tmp/db01bkp.dump /db01
		step 2 :  umount the partition
				umount /db01
		Step 3 : remove the lv
				lvremove /dev/dbvg/dblv01
		Step 4 : create new lv with new size
			lvcreate -L 100G -n dblv01 dbvg
			mkfs.xfs /dev/dbvg/dblv01
			mount /dev/dbvg/dblv01 /db01
		Step 5 : restore the backedup data here
			xfsrestore -f /tmp/db01bkp.dump  /db01



LV Snapshot:
============
	backup of lv(partition) 
it take the current state backup


the original lv is 
		dblv01   the usage was 850 MB

	/dev/dbvg/dblv01    /db01

take the snapshot
		lvcreate -L 200M -s -n snapofdblv012110 /dev/dbvg/dblv01

unfortunatly we deleted data from /db01 partition 
		rm -rf /db01/*

	how to merge the snapshot
		step1 : unmount the partition
			umount /db01
		step2 : merge the snapshot
			lvconvert --merge /dev/dbvg/snapofdblv012110

		step 3 : mount it back
			mount /dev/dbvg/dblv01   /db01

	
*** how much space lv snapshot is required?
	4 to 5 % of original lv usage
*** is snapshot will exist after merge?
		no
	

===================================================================================================================================
		VGbackup and vgrestore
	===================================
by default system will take the vg level changes backup
	suppose one of the lv is removed that will backed up
	suppose one of the lv size has been increased that also will be backed up

by default last 10 changes will be captured

		/etc/lvm/backup
		/etc/lvm/archive


By mistake we deleted one of the lv
		/dev/dbvg/dblv01

	lvremove -f /dev/dbvg/dblv01

list out the recent changes in dbvg
		vgcfgrestore -l dbvg

we have to note down the archive path to restore

			vgcfgrestore -f /etc/lvm/archive/dbvg_00011-1147489422.vg dbvg


after restore we have to enable vg and lv

			vgchange -ay dbvg
				lvchange -ay /dev/dbvg/dblv01
	
		mount /dev/dbvg/dblv01  /db01


How to take the vg backup manually

	vgcfgbackup -f /root/dbvgbkp-21-10-2022.vg dbvg

removed vg manually
	vgremove -f dbvg

how to restore the full vg
		vgcfgrestore -f /root/dbvgbkp-21-10-2022.vg  dbvg

now activate the vg
		vgchange -ay dbvg



	Activate and de-activate vg,lv,pv
==============================================

disable =	lvchange -an /dev/vg/lv
enable  =	lvchange -ay /dev/vg/lv
	a= activate yes or no
	ay = activate yes
	an = activate no

disable =		vgchange -an vgname
enable  = 		vgchange -ay vgname


physical volume
===============
	pvchange -xn /dev/sdd
	pvchange -xy /dev/sdd

===================================================

		how to refresh pv,vg,lv

	pvscan
	vgscan
	lvscan

How to create lv in particular pv
=================================
lvcreate -L 500M -n lv03 appvg /dev/sde

	sdd  appvg
	sde  appvg
	sdf  appvg


===================================================

***** Scenario 4:  Migrate lvs from one pv to another pv
		
	it's a online activity. what is the meaning of online? without inturput any tractions or unmount the partition we can perform
		task

		/dev/sdc  ===> 100 GB
			it is part of dbvg	
		
we noticed disk performance is degraded  or some warning messages are generating in /var/log/dmesg about this disk(/dev/sdc)
		cat /var/log/dmesg

what we decided is move data from /dev/sdc to new disk

later we can remove this disk because it is faulty


		Step 1 : find out lvs of pv
			how man lvs are created in that particular pv
				pvdisplay -m /dev/sde
	which is the faulty disk ? /dev/sde
		step 2 : unmount the lvs which are part of that particular pv(/dev/sde)
				there are 2 lvs 
					1. /dev/appvg/lv01  /app1
					2. /dev/appvg/lv03   /app2

			umount /app1 /app2

		Step 3 :  get the new disk equal size of fault disk(/dev/sde)  it is 5 GB

			  /dev/sdh   5 GB
		Step 4 : convert new disk as pv and add into existing vg(appvg)
				pvcreate /dev/sdh
				vgextend appvg /dev/sdh
		now faulty disk and new disk both are in same vg? yes
		
		Step 5: move the data from faulty disk to new disk
			faulty one = /dev/sde
			new disk = /dev/sdh

				pvmove /dev/sde  /dev/sdh
		
		step 6 : mount the lvs which are part of new disk
				/dev/appvg/lv01  /app1
				/dev/appvg/lv03  /app2
		Step 7 : remove faulty disk from appvg
			 vgreduce appvg /dev/sde
		Step 8 : remove faulty disk from pv list
				pvremove /dev/sde
			
		echo offline > /sys/block/sde/device/state
		echo 1 > /sys/block/sde/device/delete


=============================================================================================================================
				physical and logical extends
		disk ==> pv ==> vg ==> lv
		pv 
		vg
		lv

	pe = Physical extends
	le = Logical extends

disk is collection of sectors
	pieces of sectors are nothing but disk
		
		sector = 1/2 KB  or 512 bytes
lvm architecture will not understand sectors , it follows PE and LE

	1 PE = 4 MB
4 MB = how many sector  = 8192 sectors
	1 MB = 1024 KBs

***** what is the default size of PE/LE?
		4 MB
***** How to create lv with PE's
	-l and PES
	eg : lvcreate -l 128 -n lv04 appvg /dev/sdh
***** difference between -L and -l in lvcreate
	-L = create lv with size based  = lvcreate -L 1G -n lv05 appvg 
	-l =  create lv with PE's based =  lvcreate -l 256 -n lv06 appvg


***** How to define pe size
		we can specify pe size while creating vg it self

		vgcreate testvg -s 16 /dev/sde

want to create 1 GB lv with PE
	lvcreate -l 64 -n lv06 testvg 
	
	64 * 16 MB = 1 GB

	
	lvcreate -l 100%free -n lv07 dbvg

Take all free PE's and create lv
		-l 100%FREE
	


	Scenario 1 = Creating lv from scratch
	Scenario 2 = Extending partiton space
	Scenario 3 = Reducing partition space
	Scenario 4 = migrating lv's from one disk to another disk
	Scenario 5 = Taking snapshot on particular lv and merging
	Scenario 6 = Backup the volume group and restore

=======================================================RAID============================================================

	Redundant arry of inexpensive disks

Redundant = Backup
HA = High availability
	always some one is available to take the task that is the meaning of HA.

		Created pv ==> vg ==> lv ==> format the lv ==> mount
			some how disk got corrupted? what is the next option
				if you have backup then we will restore 
				if backup is not there? then we lost the data

	there are RAID Levels
		1. RAID 0
		2. RAID 1
		3. RAID 2
		4. RAID 3
		5. RAID 4
		6. RAID 5
		7. RAID 6
		8. RAID 10
		9. RAID 01

each and every raid level has different algorithum or functionality. we have to choose based on requirement.
	how you can decide for me RAID 1 will match? if you know about all raid levels then you can decide raid 1 will match to 
			my requirement

bits = 10101010
8 bites = 1 Byte
1KB = 1024 Bytes
1MB =1024 KB

block = 512 bytes is nothing but 1/2 KB
    sector size = 512 bytes 
		block or sector = half kb 1/2 KB


RAID 0 = Stripping
==================
	data will split between 2 or more disks.
data will stripped(devided) between the disks
    there are 2 disks
	1 GB Data
	512 MB will store in disk1
	512 MB will store in disk2

  ==> min 2 disks required to configure RAID 0
  ==> data transfer happence in blocks, at a time 512 byes(1/2 KB) will be transfered
  ==> speed will be too good because data is deviding between array disks
		array means group 
			
Draw back= there is no redundancy or backup

RAID 1 = Mirroring
==================
mirror = replica
  one data will store in min 2 disks
same file or block will store in 2 disks
	if disk1 fails also no problem same data will be in another disk
 0 % failure

 RAID 2 : stripe with parity
=============================
	stripping means deviding data between 2 or more disks
	parity = backup of meta data. backup of data about data.


journaling:
===========
   Journaling is nothing but meta data.
   what is meta data ? data about data
	data about data? which file in which sector is stored
		file1 how many sectors are allocated what are those sector numbers
			file1 = 1028sector,1029 sec, 1030 sec,1031 sec, 1032 sec,1022 sec
who is maintaining this sectors information is meta data or journaling

***** what is journaling?
	data about data is nothing but meta data. It maintaince the data where it written in disk
		how many sectors are allocated to file and which are those sectors

	1022 sec is tagged with file3? is this correct? no actually it is allocated to file1
when i refer the meta data i will come to know 1022 should be with file1 why are you here?
		while fsck or file system check up he take meta data to hand and start repairing


this journaling feature is there in ext3,ext4,xfs not in ext2

	
	Type		<Individual partitionsize>	Over all partitions size	Journaling
=============================================================================================================		
	ext2		  2 TB				32 TB				No   ==> before rhel 4
	ext3		  2 TB				32 TB				YES  ==> rhel 4 onwards
	ext4		  16 TB				1 EB				YES  ==> RHEL 5 Onwards
	xfs		  500 TB			8 EB				YES  ==> RHEL 7 onwards

/data1
/data2
/app1
/app2 
these are individual partitions in ext2 max we can create 1 partition with 2 TB only
	ext4 one partitions size max we can go upto 16 TB
	xfs = 500 TB

over all in one machine or one server max we can create 32 TB partitions if we go with ext2 and ext3
		
16 TB partitions 10 in one of the server in this case is ext3 will fit for this requirement? no
		16 TB * 10 = 160 TB 



	mdadm
==========================================
	Multiple disks administration
using mdadm we can configure RAID levels

	first let me start with RAID 1
		min 2 disks required with equal size

Creating RAID 1 array
	 mdadm --create /dev/md1 --level 1 --raid-devices=2 /dev/sdc /dev/sdd

how to check is array is ready
		mdadm --detail /dev/md1

how to make disk as faulty
	mdadm /dev/md1 -f /dev/sdc
how to remove faulty disk from array
	mdadm /dev/md1 -r /dev/sdc
how to add new disk into array
	mdadm /dev/md1 -a /dev/sde

		mdadm --detail /dev/md1

how to delete the md arrary
	mdadm --stop /dev/md1
	mdadm --zero-superblock /dev/sdd /dev/sde


Creating RAID 5 array
	 mdadm --create /dev/md5 --level 5 --raid-devices=3 /dev/sdc /dev/sdf /dev/sdg
	pvcreate /dev/md5
	vgcreate testvg /dev/md5
	lvcreate -L 2G -n lv01 testvg
	mkfs.xfs /dev/testvg/lv01
	mkdir /t1
	mount /dev/testvg/lv01 /t1

how do we know is lv is normal or raid lv
	lvs --segment
		linier  = normal lv
		stripped = raid 0
		mirror  
======================================================================================================
	Create RAID partitions with LVM method
==================================================

create RAID 0(stripping) using lvm method
	note : make sure min 2 disks(pv's) are in vg

	converted disks as pv
		pvcreate /dev/sd{c,d,e,f}
		vgcreate appvg /dev/sd{c,d,e}
		lvcreate -L 9G -i 3 -I 128K -n slv01 appvg
-i = slices or interfaces (3 disks)
-I = Interface speed 128 KB 
what is the actual speed 1 Block(512 Byte)


	lvcreate -L 1T -i 10 -I 128K -n slv01 appvg
lvs -a -o lv_name,vg_name,devices
	RAID 5
	lvcreate -L 9G -n r5lv01 --type raid5 appvg
	RAID 1
	lvcreate -L 1G -n r1lv02 --type raid1 appvg

	mkfs.xfs /dev/appvg/r5lv01
	mkfs.xfs /dev/appvg/r1lv02
	mkdir /r5
	mkdir /r1
	mount /dev/appvg/r5lv01  /r5
	mount /dev/appvg/r1lv02  /r1


======================================================SOFTWARE management======================================
	installing software or tool in linux machine
	un-installing software or tool in linux machine
	upgrading software to new version in linux machine
	information about installed software in linux machine

installing,un-installing,upgrade and query about package

package = software in linux terminalogy


			There are 2 methods to do software management
				1. RPM
				2. YUM   or DNF
	
		RPM = redhat package manager
		YUM = yellow dog update and modifier

	using rpm and yum we can install , un-install and upgrade the package(software) in linux servers

DNF = DNF  is  the next upcoming major version of YUM.


	how to get the software for linux servers
		1. cd/dvd  or iso image
		2. internet (official websites)

how to access the dvd for packages

Step 1 : connect the iso image in vm settings.
step 2 : mount the dvd
		mkdir -p /media
		mount /dev/sr0 /media
 		cd /media/AppStream/Packages

you find the all packages here
	ls

		vsftpd-3.0.3-33.el8.x86_64.rpm

Nameofthepackage-version-release-architecture.rpm
vsftpd          - 3.0     3-33  -el8.x86_64.rpm

vsftpd-3.0.3-30.el7.x86_64.rpm
	this package is for which OS? redhat 7

	
2. internet (official websites)
=========================================================
https://pkgs.org/
suse.com
redhat.com

=======================================================================

	RPM
  ================
	Query: how to get the installed packages information
			rpm -qa
		q=query
		a= all list out installed packages information
Install vsftpd package:

cd /media/AppStream/Packages
	rpm -ivh vsftpd-3.0.3-33.el8.x86_64.rpm

rpm -ivh /media/AppStream/Packages/vsftpd-3.0.3-33.el8.x86_64.rpm

Un-install package
=================
	rpm -ev vsftpd


rpm -ivh
	i = install
	v = verbose
	h = print hash(##) symbols

	only i is enough to install package
		v = 50 % installation progress
		########### = h

rpm -ev
	e= errase
	v = verbose




	How to list out recently installed packages with date?
		rpm -qa --last | more
	how to test the packages before install?
		rpm -ivh pkgname.rpm --test
	
	software/package is nothing but program.
		what'sup is a software but for developer is a program
		vlc is a software, 
		software is nothing code or program written in any one of the language(c,c++, python, java, .net)
		
  rpm is nothing but program, the developer who developed package he will keep some documents, command and functionality defined inside package. when we install the package that document,configuration files of the package and commands and all will store .
		install = documents,configuration files and command will store in the server.
		un-install = these documents, configuration files and command will errage from the server.
		
	how to get installed package information
		rpm -qi vsftpd
			i = information
	how to get documents of the package?  rpm -qd vsftpd

***** unfortunatly chmod command has been removed by mistake, How you can recover that chmod command
		/usr/bin = common commands
		/usr/sbin = super user commands like administrator commands(root)
			/bin
			/sbin

		step 1 : we have to find out rpm of /usr/bin/chomd command for that i will login to another server where chmod is present and find out rpm of chmod command the command is
					rpm -qf /usr/bin/chmod
			it will give the rpm of chmod command the package i have re-install in server where we removed chmod command
		step 2 : come back to server where i removed chmod command and re-install the package which i found in working machine
			using rpm -ivh pkgname --force i will re-install


============================================how to get the IP address of the linux server =========================
		run below command to get the details of ehternet card
				ip a

			2nd one which starts with ens, eth or eno this is ehternet card
		1st one lo is loop back it is not ethernet card
		3rd one vir is not the ethernet card
		4th one vir is not the ethernet card

	first time there will not be any ip for 2nd ethernet card
		after inet nothing will be so 
		how to get the ip for ehternet card
		
	step 1 : vi /etc/sysconfig/network-scripts/ifcfg-ens33 or ifcfg-en0  or ifcfg-eth0
			inside this file modify below parameters
			ONBOOT=no 
				change it to
			ONBOOT=yes
	then save and come out from the file
		:wq
	step 2 : restart the network service
			systemctl restart network-online.target
	now you can find the ip address
			ip a

Now download and install the putty and winscp softwares in windows machine
==========================================================================
putty link   
https://the.earth.li/~sgtatham/putty/latest/w64/putty-64bit-0.78-installer.msi

double click on putty which is downloaded in downloads

winscp
======
https://winscp.net/download/WinSCP-5.21.5-Setup.exe

using putty we can connect to linux machine and perform administration activities like creating user, creating file all
using winscp we can transfer or copy files from winodws to linux box as well linux to windows also




query:
======
rpm -qa   = list out all installed softwares
rpm -qa vsftpd   = to list is vsftpd is installed or not
rpm -qd vsftpd   = to give documents of vsftpd software
rpm -qd mariadb-server = to give documents of maridadb-server software
rpm -qf /etc/fstab = to know the file is generated by which rpm
rpm -qf /usr/bin/chmod
rpm -qc vsftpd     = configuraiton files of vsftpd
rpm -qi vsftpd  = information about vsftpd

install 
=======
rpm -ivh  vsftpd.......rpm
re-install
==========
rpm -ivh  vsftpd.......rpm --force

errase
======
rpm -ev vsftpd

			YUM		rpm				DNF
	=================================================================================================================
	yum install vsftpd.....rpm      rpm -ivh 		dnf install vsftpd.....rpm	
	yum list installed 		rpm -qa			dnf list installed
	yum list installed vsftpd	rpm -qa vsftpd		dnf list installed vsftpd
	yum remove vsftpd		rpm -ev			dnf remove vsftpd
	yum reinstall vsftpd...rpm	rpm -ivh pkgname --force  dnf reinstall vsftpd...rpm
	yum info vsftpd			rpm -qi vsftpd		 dnf info vsftpd



dependencies:
=============
		one package will depend on another pakcage to install
			mariadb-server is the pkg which we want to install but it will depend on some more pkgs if those pkgs 
				not installed then mariddb-server will not install until we satisfy dependencies.
	
			mariadb-server
				dep1 = mariadb
				dep2 = gcc
				dep3 = glibc =====> dep4 = pkg4
						    dep5 = pkg5======> pkg7

		7 dependencies are there for mariadb-server
			total 8 pkgs will install
				1 main and 7 dependencies

						    dep6 = pkg6



*** how to know depencies of one pkg?
	rpm -qRp mariadb-server......rpm
  R = required

*** how to install package without dependencies?
	rpm -ivh pkgname.rpm --nodeps

		installing pkg without installing dependencies is not recommended
				the software will not fuction as expected if we install software without dependencies.

================================================================================================================================
			YUM or DNF
	repository can possible to create using yum or DNF tools.
		using rpm we can't create repository.

what is repository?
  creating index with all packages along with pkg with dependencies 
  chapter 1 : page number 1 to 24 
	eg : mariadb-server
		dep= dep1
			dep2
			dep3
	advantage:
		1. dependencies will resolve or taken automatically
		2. easy to upgrade os from one version to another version 
			eg: rhel 8.5 to 8.6 upgradation
				yum update 
				dnf update
		3. Easy to downgrade from 8.6 to 8.5
		4. can maintain 1 repostiroy server for all rest of the servers
			all servers point out to repository server
		
		

Creating Local Repository with help of DVD
==========================================
	Step 1 : mount the dvd
			mount /dev/sr0 /media
	Step 2 : install the createrepo and vsftpd pkgs
			rpm -ivh /media/Packages/deltarpm-press tab
			rpm -ivh /media/Packages/python-deltarpm press tab
			rpm -ivh /media/Packages/createrepo press tab
			rpm -ivh /media/Packages/vsftpd press tab
rhel7 = createrepo
rhel8 = createrepo_c
	Step 3 : copy all packages from dvd to local directory.
		mkdir /var/ftp/pub/rhel75
		cp -r /media/Packages/*  /var/ftp/pub/rhel75
		
	Step 4 : Create the repository
			createrepo -v /var/ftp/pub/rhel75/
	Step 5 : configure the repository
		
			vi /etc/yum.repos.d/local.repo
	
			[rhel75]
			name=rhel75
			baseurl=file:///var/ftp/pub/rhel75
			gpgcheck=0
			enabled=1

	yum clean all
	yum repolist


	systemctl start vsftpd
	systemctl enable vsftpd
	systemctl stop firewalld
	systemctl disable firewalld

make sure IP address is present in yum server
    ip a
if there is no IP then
	vi /etc/sysconfig/network-scripts/ifcfg-ens192
	 ONBOOT=yes
systemctl restart network
ifup ens192

	now there should be a ip address
 
	vi /etc/vsftpd/vsftpd.conf
		anonymous_enable=NO
				change it to
						anonymous_enable=YES

	sytemctl restart vsftpd
=================================================Clients integration with repositor server=====================
note : make sure both the servers has ip addresses

	yum server is = 192.168.237.128   
	client machine ip = 192.168.237.135

in yum server 2 repositories are configured= rhel75 and rhel76
client machine is running with rhel75 os

step 1 : login to client machine (192.168.237.135) and do the connectivity test
		ping 192.168.237.128
	you should get the response from 128(yum server)
		nc -vz 192.168.237.128 21

Step 2 : configure the repositories
		vi /etc/yum.repos.d/local.repo
		 	[rhel75]
			name=rhel75
			baseurl=ftp://192.168.237.128/pub/rhel75
			gpgcheck=0
			enabled=1
			[rhel76]
			name=rhel76
			baseurl=ftp://192.168.237.128/pub/rhel76
			gpgcheck=0
			enabled=1

yum clean all
yum repolist
====================================================integration is completed=========================================
Patching:
  step 1 : take the snapshot of virtual machine
		vmware workstation ==> virtual machine ==> right click ==> snapshot ==> take snapshot
Step 2 : login to client machine and perform patching
		note : make sure rhel 7.6 repository is enabled
	
	yum update

	

=============================================================Create repositories without copying pakcages to local machine===========
	step 1 : mount the dvd 
		mount /dev/sr0 /var/ftp/pub/rhel85
	Step 2 : configure the repository
		vi /etc/yum.repos.d/local.repo
[rhel85base]
name=rhel85base
baseurl=file:///var/ftp/pub/rhel85/BaseOS
gpgcheck=0
enabled=1
[rhel85appstream]
name=rhel85appstream
baseurl=file:///var/ftp/pub/rhel85/AppStream
gpgcheck=0
enabled=1


	yum clean all
	yum repolist
	
systemctl start vsftpd
systemctl enable vsftpd
systemctl stop firewalld
systemctl disable firewalld


	vi /etc/vsftpd/vsftpd.conf
		anonymous_enable=NO
				change it to
						anonymous_enable=YES

	sytemctl restart vsftpd

========================================================================
	
	client integration
		
ping yumserverip
nc -vz yumserverip

vi /etc/yum.repos.d/local.repo
[rhel85base]
name=rhel85base
baseurl=ftp://192.168.237.132/pub/rhel85/BaseOS
gpgcheck=0
enabled=1
[rhel85appstream]
name=rhel85appstream
baseurl=ftp://192.168.237.132/pub/rhel85/AppStream
gpgcheck=0
enabled=1


yum clean all
yum update
================================================================================
how to list out yum activities?
	
		yum history
how to read more information about particular activity
			yum history info <id>

how to roll back the yum activity
			yum history undo <id>


how to roll back the full patch
	upgrade
======================
	reposerver side  = rhel 8.5
	client machine will be with 8.4 and after patching 8.5 os

	rollback/downgrade
===========================
	reposerver side = rhel 8.4
	client machine = will point out to 8.4 repository and yum history undo activity id



roll back steps:
==============
repo server side:
=================
	step 1 : configure the repository with old version in my case old was 8.4 so i configured 8.4 repository
			mount 8.4 dvd
			configure the repository vi /etc/yum.repos.d/local.repo
				yum clean all
				yum repolist

	step 2 : integrate client machine with 8.4 repository
			vi /etc/yum.repos.d/local.repo
[rhel84base]
name=rhel84base
baseurl=ftp://192.168.237.132/pub/rhel84/BaseOS
gpgcheck=0
enabled=1
[rhel84appstream]
name=rhel84appstream
baseurl=ftp://192.168.237.132/pub/rhel84/AppStream
gpgcheck=0
enabled=1


		yum clean all
		yum repolist
	step 3 : set the old kernel to boot
			grubby --set-default-index=1
			grubby --default-kernel
			grubby  --info=ALL
	step 4 : reboot the server
			make sure old kernel is loaded
				shutdown -r now
				  login to server
					uname -r
			make sure old kernel is loaded


	step 5 : Remove protect file
			/etc/yum/protected.d/systemd.conf
				rm -rf  /etc/yum/protected.d/systemd.conf
	Step 6 : undo the yum activity using yum hisoty command
			yum history
				here notedown the activity id of update then perform the undo
			yum history undo 2



	Major versions = rhel 6, rhel 7,rhel 8, rhel 9
	minor versions = rhel 6.1,rhel6.2,....rhel6.10   7.0,7.1,7.10,8.0,8.1,8.2,8.3,8.10,    9.0, 9.1
	kernel updates = 8.3=4.18.0.305, after 3 months 8.3=4.18.0.307 

		every 3 months once redhat company will realese the new set of pkgs with new kernel.	

8.4 =4.18.0-305


	redhat = satelite server   our satellite server ==> redhat repository servers
	suse   =  suma server      our suma server ==> suse repository servers







	redhat						suse
====================================================================================================
	yum repolist				zypper lr
	yum update				zypper update
	yum clean all				zypper ref
	yum remove vsftpd			zypper remove vsftpd
	

***** How to integrate redhat server with satellite server?
	subscription-manager register --org="xyz.cm" --activationkey="rhel8.4key"
***** how to register suse sever with suma server?
		we will download bootstrap and run the bootstrap

how to check subscription status
		subscription-manager status
			or
		subscription-manager list
how to check subscription status
		SUSEConnect --status-text

How to de-register server with satellite?
	login to satellite server using browser
			then go to hosts
				then select the server and delete

how to de-register suse server?
		login to suse manager server using browser
			then go to systems
				select the server and delete







/dev/sdb
	/dev/sdb1
	  2048  - 200042
can possible to extend partition space
	first umount the partition
	resize the disk capacity in platform level like if the server running in azure we can increase the disk space
		next login to server and enter inside disk
			fdisk /dev/sdb
				d delete
			note: after delete don't comeout
				just again create new partition
						n create new partition with new sizes
							w

				restart if partition is os
				if partition is normal then just mount it back reboot not required



another scenario:
	multiple partitions in disk then is it possible to extend partition space?
		/dev/sdb1
		/dev/sdb2  can possible to extend only for sdb2 not to sdb1

create local account in servers:
===============================
create account using useradd command with specifications whater mentioned in ticket
	useradd -u 10020 username




====================================================================================================================================

		client : ADM  	===> ADM company who given work to accenture
		vendor : Accenture  ===> some employees work for ADM client. these employees work for ADM client

		SLA : Service level agreement
				between adm and accenture

			in aggement mentioned activities
			================================
			1. build the servers
			2. complete the post builds
			3. supporting at os level(creating partitions, extending partition , user creation, all activities)
			4. perform patching every 3 months once for all the server
			
ticketing tool:
===============
	Service now(snow)

technical person
==============
linux administrators(prasad,raja,siva)

change co-ordinator(PMO team) project management office
===================

	coordinating with linux team to perform the patching
			make sure patch is completed within timelines


Patching procedure:
==================
how frequently you do the patching? 
	quarterly once(3 months)
are you using any tool to perform patching?
	no , we are doing manually, but we have satellite server for repositories.
		for redhat we have satellite and 
		for suse we have suma manager
what is the use of patching? why we have to perform patching frequently?
		1. To install the latest packages with new features.
		2. update features of packages(like new version of pkg is released that will update along with patch)
		3. To correct/fix bugs/errors in existing pkgs.
		4.  install/upgrade latest security pkgs for protect him self from hackers.
CEP = change execution plan
*****panel : could you please explain me patching procedure
		we have PMO team who will co-ordinate the changes.
	PMO team will schedule meeting for change implementation.
		patching is scheduled for 10 servers. 
	Step 1 : we join in  scheduled meeting and then we request backup team to complete backup for scheduled servers.
	Step 2 : paralely we take the snapshot for all scheduled servers and disable the alerts.
	Step 3 : We collect the prechecks and keep in the notepad 
			kernel version, current os version, partitions information, volume group and lvs information and all.
				uname -r;hostname;cat /etc/os-release;date;df -h;vgs;lvs;pvs;cat /etc/fstab
	Step 4 : we request application and db team to stop the respective application in scheduled servers.
		===========================================
			scheduled servers = 7 are application severs
				                     3 are db
		who will stop the application in 7 servers? application team
			which is first app or db while stopping? 
				application ==> db
			while starting
			==========
			start db ==> start application
		===============================================
	Step 5 : we reboot the shceduled servers once we get confirmation from application and db team once they stop application and db.			
			this reboot is before patching to confirm no issues with server before patching.
			if server is up that means no existing problems in server.
		
	Step 6 : if server is up then we verify is the server is integrated with satellite or not, if not integrated we integrate now. 
			using subscripton-manager we register redhat server with satellite
		if server is suse then we run bootstrap script to register server with suma manager.
	Step 7 : now server is registered then we continue patching in scheduled servers
			yum update    command for redhat servers
				and zypper update for suse servers.
		we observ the patching progress and reboot the servers once after patching.
	Step 8 : once server is up after patching then we collect post checks and validate those post checks with prechecks. here mainly we verify
			partitions are same and kernel version got changed and all verified.
	Step 9 : if everything looks good like kernel version is updated and os version also updated then we request app and db team to start respective things
			in scheduled severs.
	Step 10 : we close change task if application working fine.
		and logoff from meeting.

 
After patching application team is saying application is not working?
	first we boot with previous kernel and ask team to start now application.
		if application is working with old kernel that means compatability between application and new kernel.
		
	roll back
	=======	
	using snapshot we just merge and ask application team to start the things

*****panel will ask how you revert everything without merging snapshot?
		step 1 : reboot and boot with old kernel
			while booting select old kernel in grub screen and press enter
		Step 2 : make sure old repository is configured in client machine
			we enable old version repository using subscription-manager
				subscription-manager --enable=<old repository id>
		Step 3 :  remote the kernel protection file
			rm -rf /etc/yum/protected.d/systemd.conf
		step 4 : undo the activity using yum history
				yum history 
			here we identify patching activity id then undo that activity using undo option
						yum history info  4
					yum history undo 4

		Step 5 : reboot and ask application team to valiate the application functionality.

	
	


change number : ch0012456 for patching
		ch0012456-01  change task1 = Linux team
		ch0012456-02  change task2 = Backup team
		ch0012456-03  change task3 = vmware team
		ch0012456-04  change task4 = application team
		ch0012456-05  change task5 = DB team

	PMO team person create change with change tasks and assign change tasks to respective teams


***** after patching server is not coming up? how you will fix it
	i will verify error message in serial console and take neccesary action based on error message

			mostly kernel panic or grub errors then
				i will take machine into rescue mode and rebuild the kernel using 
					dracut -f /boot/initramfs-kernelversion.img  kernelversion
				also i will recreate the grub
					grub2-mkconfig -o /boot/grub2/grub.cfg
then will reboot the server

===============================================SUSE commands=================================
how to list out repositories
	zypper lr
		lr = list repositories
how to install particular package
	zypper install vsftpd
	zypper in vsftpd
how to search for package
		zypper se vsftpd
			i+ meanas installed
				
information
	zypper info vsftpd


how to upgrade only kernel?
	zypper up kernel
	zypper update kernel

how to perform patching
	zypper up
	zypper update
how to migrate service pack
	sles 15 sp1 from sp1 want to upgrade to sles 15 sp2
		zypper migration

how to install pkg without asking confirmation
	zypper --non-interactive install mariadb-server
		or
 	zypper -n install mariadb-server
	 zypper -n remove mariadb-server

redhat
======
	yum install mariadb-server -y



How to migrate service pack from sles 15 sp3 to sles 15 sp4
==========================================================
	zypper migration




***** how to install one package using particular repository
	yum --disablerepo="*" --enablerepo="reponame" install vsftpd
***** how to exclude particular package from update
		particular package should not upgrade to next level
		
		yum update --exclude=packagename
	how we can exlude packages from patching permanently
			vi /etc/yum.conf
			exclude=pkg1 pkg2 pkg3
	dnf update --exclude=pkg1

***** how to upgrade only security packages
	yum update --security
***** how to update only security patches in suse
		zypper patch -g security

Basic administration
disk management= Basic method,LVM,RAID
Software Management = rpm, yum, zypper , dnf
Booting procedure = today and tomorrow
Network services = ftp,ssh,nfs,samba,dns,ntp,httpd
Performance tunning 


===================================================Booting procedure===============================================================

Booting = start
OS start procedure

Good knowledge on Booting procedure will help to identify the boot up issues.
suppose we started machine but we are not getting login prompt, we can identify where is problem if we have good knowledge in booting
	procedure.

between power on server to login prompt there are 5 stages 
	power on   ==========================================> login prompt
			  5 stages
	poweron
	1. BIOS
	2. MBR
	3. GRUB
	4. KERNEL
	5. SYSTEMD
	login prompt

Stage 1 : BIOS
Stage 2 : MBR
Stage 3 : GRUB
Stage 4 : KERNEL
Stage 5 : SYSTEMD



Stage 1 : BIOS : Basic input output system
==========================================
	BIOS purly belongs to hardware.
	
	once we power on the server bios takes the control
		bios will execute 3 sub tasks
			1. POST ( Power on self test)
			2. CMOS ( complementory Metal oxide semi conductor)
			3. BIOS

	Task 1 : post:
	=============
		power on self test
			as soon as power on the server, post program will execute.
	it does the health checkup of all the components which are connected to mother board.
	like hard disk health, RAM health,processor health, dvd..........
	
		incase any failure in any of the hardware then post will give the signal so and hardware health is not good.
				non stop beep sound is coming that means RAM issue
				on the screen we can message like HARD DISK is not found

		there are errors in hardware then it stop here only if no errors then pass control to next task.

			====================================================================
	post is a program which will be inside chip. hardware vendor will inject this program inside chip.
		mother board is from dell means ? dell company wil insert the post program inside chip


	Task 2 : CMOS( complementory metal oxide semi conductor)
	========================================================
		cmos also one of the chip(program).
			cmos collects the server critical information from the RAM before server goes down and same data will return 				to RAM while server is starting up.
		critical information:
			date and time
			server configuration (like ram size , hard disks, bios securities like password)
			
			cmos chip and storage of cmos
			cmos chip collects data and store in cmos storage area
				cmos battery will give power supply to cmos storage
	Task 3 : BIOS
	============
		BIOS will try for the os in all the priority devices
			first it goes to hard disk is os is there or not if there is os give hand over to hard disk
				if not there then
			it goes to usb storage and look for os if os is there in usb then give hand over to usb storge
				if not there then
			it goes to dvd and look for os if os is there then pass control to dvd
				if not there then
			it goes to network and look for os if os is there then pass control to network
				if not there then
			finally it say os not found

	BIOS will look in only first sector of the device whether there is os or not. It will not go to all the sectors 
		512 Bytes(1/2 KB)
		
Stage 2 : MBR(Master boot recorder)
=====================================
	the MBR stores in first sector of the device
		MBR is a very small program it stores inside 512 bytes(1 sector).
		
	MBR verify next stage condition if next stage that is grub is in good condition then pass control to grub
		else give grub error.
====================================================================================================
		if grub is in good condition then mbr pass control to grub 
			if grub is corrupted then mbr give error message on the screen like grub error
						grub>
			
	is the grub belong hardware or os?   OS
		post program belongs to OS or hardware? hardware

	solution: 
		take system into rescue mode and install the grub and recreate the grub
			grub2-install /dev/sda
			grub2-mkconfig -o /boot/grub2/grub.cfg
	if still not booting still giving grub error then need verify grub settings /etc/default/grub
		
			first sector or MBR (512 bytes)
			===============================
				446 bytes = primary boot loader information(grub)informtion
				 64 bytes = partition table information (/,/boot , /var)
				  2 bytes = validator
				==========
				512 bytes

	suppose grub is in good condition then mbr pass control to GRUB

Stage 3 : GRUB ( Grand unified boot loader)
===========================================
		boot loader
			Grub is a boot loader to load the kernel.
	grub can maintain multple kernels or Operating systems.
			using grub we can choose which kernel has to load, or we can choose which os has to load
			
		0. rhel 8.5
		1. rhel 8.6
		2. rhel 8.7
		3. windows 15
	how many kernels are installed in single system?
			
		grubby --set-default-index=1
	which kernel is going to load by default ? 8.6
	
suppose next time onwards only windows want to load then how we can make system to load windows?

			grubby --set-default-index=3

		
grub is a tool which will help to load the kernel. using grub we can choose which kernel has to load during bootup also we can 
	make default kernel using grubby command
		like 
		grubby --set-default-index=2

	Boot loaders
	===========
	LILO   = Linux loader
	Grub   = grand unified boot loader ( RHEL 5 and 6)
	Grub2  = grand unified boot loader version 2 ( rhel 7 and 8)
		
	difference between grub and LILO is in lilo we can not choose the kernel during bootup.
		but in grub we can choose the kernel which needs to bootup.

		interactive option is there in grub tool

grub settings will be in /boot/gru2/grub.cfg	
		/etc/default/grub is the source for /boot/grub2/grub.cfg


grub is a boot loader it just pass control to respective kernel

Stage 4 : Kernel
================
grub passed control to kernel stage
		
		in the kernel stage 3 tasks will execute
			1. Load the drivers and modules
			2. Mount the / file system in read only mode
			3. execute the systemd program

	Task 1 : Load the drivers and modules
	======================================
		initramfs is a tempary / file system

	/ is permanent one
	/boot/initramfs-4.18.0-305.el8.x86_64.img    this is tempary / file system

	almost configuration files , libraries and commands will be inside initramfs also

drivers and modules: 
	audio  = driver
	video  = driver
	network = driver
	pendrive = driver
	hard disk = driver
	lvm  = module
	Bonding = module
	wifi = 
	
			initramfs is a temparary / file system, it will extract during bootup and mount then it start loading the drivers and modules
		once drivers and modules are loaded then it mounts the / file system in read only mode then finally initramfs will get 		unmounted
		
			how to view the data of initramfs
				 lsinitrd /boot/initramfs-4.18.0-305.el8.x86_64.img

		initramfs
		initialize ram to file system

	Task 2 : initramfs will mount the actual / file system in read only mode and un-mounts the initramfs
	Task 3 : systemd program will trigger once / file system is mounted

	systemd is the first pogram of OS
	it occupies the pid(process id ) 1

***** what is the first pogram of OS? 
		systemd
***** what is the systemd process id?
		1
in which stage / will mount?
	kernel stage
is / file system will mounted in read/write mode in kernel?
	no, in kernel stage / will mount in read only mode

rhel 5 and 6  there is no systemd program earlier only initd
	initd is replaced with systemd program.
		initd process id was 1

Stage 5 : systemd
==================
	in this stage all OS related services will start
	like ftp,ssh,network services and mounting the file system whatever we mentioned in the /etc/fstab 
	and finally it gives the login prompt


		there are 5 targets					runlevels
	=====================================================================================
		shutdown.target					run level 0 = shutdown
		rescue.target					run level 1 = single user mode
		multi-user.target				run level 2 = command mode with out nfs service
		graphical.target				run levle 3 = command mode with nfs service
		reboot.target					run level 4 = research and development( R & D)
								run level 5 = graphical mode
								run level 6 = reboot

		
		

=================================================================================================================================


		now server is running with rhel 7.5 3.10.0.305
		after patching kernel updated to rhel 7.6   3.10.0.355
		again patching is performed now new kernel is 7.8     3.10.0.800


systemctl stop firewalld

systemctl -a | grep firewall
	stop that service

======================================How to explain booting procedure to panel=======================
***** explain me booting procedure

Booting procedure will help to understand bootup issues and easy to fix.
there are 5 stage from poweron to login prompt
1 is BIOS:full form of BIOS is Basic input output system.
	this stage purly belongs to hardware.
	in this stage 3 tasks will execute 
		1 is Post power on self test : it is a program which will be in one the chip on mother board it does the health 
			checkup of all the components which are connected to mother board.
			if no faulty devices then it pass control to CMOS else it give error message
		the 2nd task is CMOS ( complementary metal oxide semiconductor)
			it collects the critical information before server goes down and it return it back to main memory(RAM)
			while server is coming up.
			the critical information like date,time,hardware information,security things like bios password and all
		then cmos pass control to BIOS task, it is a 3rd task in BIOS
		bios will find out the operating system in devices as per priority. Once it find OS then it pass control to MBR.
MBR is the second stage the full form of MBR is Master boot recorder
	MBR is a very small program, it stores in first sector of the OS device.
	the mbr capacity is 512 bytes nothing one sector.
	the mbr maintain the next stage information that is grub condition if grub is in good condition then pass control to grub
	else it give grub error.
the mbr pass control to grub if grub is in good condition 

GRUB: the grub full form is grand unified boot loader version 2
	there were 2 older versions
		1 is LILO linux loader and 
		2nd one is GRUB grand unified boot loader
		the current version is GRUB2 it introduced from RHEL 7 onwards
Grub is a boot loader , it can maintain the multiple kernels and end user can choose which kernel want to boot 
also end user can set which kernel has to boot by default.
	end user can interact with grub during bootup and select kernel to bootup.
the grub pass control to kernel which we defined default or selected manualy.

Now booting procedure in kernel stage, in this kernel stage 3 tasks will execute
	the task 1 is Load the drivers and modules
		initramfs is one of the critical file which will do the drivers loading and mounting / file system in read only mode
		initramfs is a tempary / file system which contains all os related libraries,configuration files and commands to
		load the drivers and modules
	initramfs will mount and load the drivers and modules after loading drivers and modules then it mounts the original / file 	system in read
	only mode and unmount the initramfs which is mounted tempararly.
	once / file system mounted in read only mode then systemd process will start 

systemd is the first process of OS 
it occupies the process id(pid) 1

the last stage is systemd:
  in this stage systemd will identify what is the default target is set and pass control to default target
	eg: the default target is graphical.target then
		all graphical programs or services will start and finally it gives the login prompt
	if we set default target is multi-user.target then graphical services will not start only command line related programs will
		start.

once all the services starts then we can see the login prompt

=====================================================================================================================================
	what is the size of MBR?  512 Bytes , first sector of the device
	what is the LILO = it is a old boot loader the full form is Linux loader
	what is the initramfs = it is a tempary / file system , it will load the drivers and modules during bootup.
				it will be in /boot directory, it contains the libraries,config files and commands
	in which stage / file system will mount? in kernel stage that to in read only mode
	what is the first process of OS ? systemd in rhel 7 onwards before rhel 7 there was initd
	what is the pid of systemd? 1
	how many runleves are there in rhel 8?
		5 
		1. poweroff.target
		2. rescue.target
		3. multi-user.target
		4. graphical.target
		5. reboot.target

====================================================================================================================================
					Networking 
				=============================
network is nothing but connectivity between 2 devices.

how we can make connectivity between one computer to another computer and we can connect to other computers?
		
		3 types of networks
	==================================
	1. LAN (Local Area network)
	2. MAN (Metropolition Area network)
	3. WAN (wide area network)
1. LAN : local area network
==========================
	creating connectivity between systems which are in same building that is nothing but LAN.
	we will maintaint the patch panel to create network for building systems or servers. the patch panel board will be inside 
	data center.
	all the systems cables will connect to patch panel.
	that means all in one network.

2. MAN: metro polition Area network
==================================
	creating connectivity between 2 breaches within same city.
	here we have to using third party ISP provider
		ISP = Internet service provider
			AIRTEL
			JIO
			VI
			ACT
			BSNL


	switch : device
		using switch we can create the network.
	router : router is for transfer traffic from one network to another network
	firewall : it is a security component
		whatever traffic is coming inside and going out that will verified by firewall
		we can retrict access through firewall


traffic or packet: nothing but data
what is data: text message, image,video,audio,file

	but in network terminology we call as traffic or packet





	yum --disable-repo=* --enable-repo="name of the repo" yum update



df -hi   inodes information
df -h    file systems usage information

how to find out high usage file in particular directory?

	du -kh * | sort -rn | head -1
how to find out installed package information with date which are done recently?
		rpm -qa --last | more

		/var/log/yum.log

by default sticky bit applied on /tmp because all the users and program should required one of the place to store data tempararly
	while running process so developers reserved /tmp is the place can be used by every one.


==================================================================================================================
	IP Address
=========================
	IP = Internet protocol

	
		1. IPV4 (32 bit) address
		2. IPV6 (128 bits) address

			11111000.00111110.01010101.00000111
			   8        8        8         8
			==================================
					32 or 4 octates


each computer required one unique network address to communicate each other.
	
	computer will have ehternet or network adapter for that adapter we have to assign IP Address

how to check is the network adapter is connected or not?
		ip a show
			or
		ip a



		IP ADDRESS
	===============================
	types of ip addresses?
		1. Public IP
		2. Private IP

IANA = Internet assigned number authority
	it is a communitory for network. this team responsible to take care the network world wide.

they devided network into 2 catogories
	1. public network
	2. private network

		public is nothing but internet
		private is nothing but intranet (LAN or MAN)


			total IP Addresses are ? 1 to 255
				1 to 255 is devided for private network and public
				
		IP Classes
	==========================
	A Class	=   1 - 126  network
		127  = loop back each and every computer or mobile will have LO=loop back
	B Class = 128 - 191  network
	C Class = 192 - 223  network
	D Class = 224 - 239  Multicast(tv live channels)
	E Class = 240 - 255  R & D

	

***** what is the loop back:
      ======================
each and every component will have one default loop back ip address, that will start 127.1.0.1
what is the use of loop back?
	insider server services will be there, each other will communicate through loop back with insystem.
suppose machine to machine means then ethernet card

within machine services communicates through ehternet card or loop back?
		loop back

accenture employees are 10 lakhs is 255 ip addresses will enough for each and every employee? no
	IANA developed one algorithum
	
			oct1 . oct2 . oct3. oct4
			1.1.1.1  is this unique? yes
			1.1.1.2  is this unique? yes
			1.1.1.3  is this unique? yes
			1.1.1.255 
			1.1.2.1
			1.1.2.2
			1.1.2.255
			1.1.3.1

	255*255*255*255 = so much numbers



	IP Classes					private				  public
	=====================================================================================================================
	A Class	=   1 - 126  network			10.*.*.*			1-9 and 11 to 171  
		127  = loop back
	B Class = 128 - 191  network			172.16.*.* to 172.31.*.*       128 to 171 and 173 to 191
	C Class = 192 - 223  network			192.168.*.*			193 to 223 
	D Class = 224 - 239  Multicast(tv live channels)
	E Class = 240 - 255  R & D


 
	10.1.1.1
	10.1.1.2
	10.1.1.3
	
		10.255*255*255= 

	public in A class = 126 - 1 loop back= 125 and agin 125 - 1 (private 10) = 124 * 255*255*255


192.168.1.4 public or private? private
11.1.2.3 ==> public
12.1.2.3 ==> public
10.1.2.3 ==> private
172.16.1.1 ==> private
172.15.1.1 ==> public

umask in permissions
	777
	022
	===
	755
same way here each and every class has net mask
		default netmask values
		=======================
	A class = 255.0.0.0    10.0.0.0
	B Class = 255.255.0.0
	C Class = 255.255.255.0


ehternet card= network card
NIC card  = Network interface card

	NIC card is manfactured by manufactor
		it is dell system network card manufactored by dell
		

	Hardware address for each and every ethernet card, that is MAC address

			HBA = HOST bus adapter
			it will have unique name or number ? ww number
			same way network adapter will have one unique number? mac
				MAC = media access controller

	ip address is assigned with MAC address 
		MAC ======> IP Address

How to assign the ip address for ethernet card
	
			Assigning IP Address
	====================================================
		1. DHCP method
		2. Static IP

How to assign static ip permanently?
	Step1 : modify the ethernet car configuration file
		vi /etc/sysconfig/network-scripts/ifcfg-ens192
			change 1 : BOOTPROTO=static
			change 2 : ONBOOT=yes
			change 3 : add below lines
				IPADDR=192.168.237.10
				NETMASK=255.255.255.0
				GATEWAY=192.168.237.1
				PREFIX=24

	
	step2 : restart NetworkManager service 
		if still ip is not reflected then bring down the ehternet card and bring up
			ifdown ens192
			ifup ens192


ip a show

***** what is the use of ONBOOT=yes , it mean ethernet card should come up while server booting up

GATEWAY= this gateway is defined by network team.
	what is the use of gateway
		gate for network

whoever is in network they has to go out and come inside using this way only.
	for one network only one gate will be there to go out and come inside


		IPV4 = 32 bits
	32 - 24 = 8 bits ip addresses can be possible to assign to this network
	32 - 23 = 9 bits 

	

how to assign additional IP Addresses
=========================================
			vi /etc/sysconfig/network-scripts/ifcfg-ens192
	add below content along with existing

				IPADDR1=192.168.237.12
				NETMASK1=255.255.255.0
				GATEWAY1=192.168.237.1
				PREFIX1=24
				IPADDR2=192.168.237.13
				NETMASK2=255.255.255.0
				GATEWAY2=192.168.237.1
				PREFIX2=24

	ifup ens192


in which situations we have to assign additional ip address 
	in same server we have two applications(softwares)
		application team requested we need seperate ip for invidual applications
		in that situation we can assing addition ip address for same ethernet card


		1 mbps  =  mega byte per sec
		1 gbps	=  giga byte per sec



Important note:
===============
	don't go with 192.168.237.*
i got 237 network
you may will get diffent 3rd octat

	so please first assign dhcp ip
		open /etc/sysconfig/network-scripts/ifcfg-ens192
			ONBOOT=yes

	ifup and ifdown
			ifup ens192
		now there should be ip address
	so going forward you have to use only this series eg : 192.168.221.128
				next ip or next time we can use 221 only 
		like 192.168.221.10
		
	
==================================================Network tools======================
		1. Ping
		2. Telnet
		3. Nc
		4. NMAP
		5. traceroute
		6. ss/Netstat

 route = is nothing but connectivity between one component to another component.
	
1. ping:
========
 	using ping we can test the  route between machine to another machine
		cmd : ping destination ip

			source means where your executing ping command from here some packates will sent to destination
		and destination will ack and return back the packets
			suppose we sent 10 packets even destination will retun the 10 packets that means there is proper route

	ping 192.168.237.140 
		or
	ping 192.168.237.140 -c 5


services(vehicles) or transportation
====================================
	service    port
	================ 
	ftp 	= 20/21 
	ssh 	= 22
	sftp 	= 22
	nfs 	= 2049
	samba	= 136/137/138/445
	dns 	= 53
	dhcp 	= 67/68
	NTP 	= 123
	http 	=  80
	rsync 	= 22
	

each and every service has unique feature, based on requirement we select service transfer data.
	
	systemctl stop sshd
	systemctl stop vsftpd
	systemctl start vsftpd
		  restart 

systemctl enable vsftpd 
	this command will enables the vsftpd to start when server is coming up
systemctl disable vsftpd
	tell me vsftpd service will start or not when server is coming up? 
			no
then how i can start
	systemctl start vsftpd
	systemctl enable vsftpd
how to check is the service is enabled/disabled during bootup?
	systemctl is-enabled vsftpd

		rhel 4,5,6 = service vsftpd restart
		rhel 7 & 8 = systemctl restart vsftpd


2. Telnet is also one the toot or service , even telnet will have port number that is 23
========================================================================================
	using telnet we can test the service status in remote machine
		is ssh is running or not if running there is access via ssh service or not

		telnet 192.168.237.140 22
			to inturpt 
				press ctrl key and ]
					then quit

		error : Connection refused  = service is not running in destination machine. start service systemctl start vsftpd
		error : no route to host  = firewall is blocking . stop the firewalld service in destination machine		
	
3. NC: netcat
=============
	using nc we can test the service status in remote machine.

	netcat and telnet both functionality is same but companies recommend you to use nc not telnet
	
which one is recommended? nc or telnet?
	NC
using telnet hackers can transfer data but using nc not possible to send data

	nc -vz 192.168.237.140 21

	-v = verbose
	z = zero packets

4. NMAP:
========
	using nmap we can test how many servers or systems are up in the network and also which are the services running stat in particular machine.

		task 1 = what are systems are up in network
				nmap -sn 192.168.237.0/24
		task 2 = we can check which are ports are listening or services are running
				nmap 192.168.237.137

service and port there is link or not ? yes
	our terminalogy service
	network terminalogy port number

	port will come into listen state when service is running
	if service is stopped even port will not listen state
	if service is running then port will come into listen state

	how to konw is the port is listening
		ss -nap | grep :22


5. Traceroute:
==============
using traceroute command we can test the route between source machine to destination machine.
	eg : we want to trace the route between machine1 to machine2
		login to machine1 and execute traceroute command
			traceroute machine1ipaddress

	hop is nothing next point to reach from that next point connect to another hop 
		
		connectivity or network is created with help of hops.

	
	incase packets are not reaching to destination then we can test the route using traceroute command. 
		traceroute can tell you exactly in which place block is there i mean till which hop network is there.
			till which hop connectivity is there

	traceroute 192.168.237.140
		
	even port number we can test
		traceroute -p 22 192.168.237.140

*** what is the traceroute?
	using traceroute we can trace the route betwee source to target in which hop traffic is dropping or blocking that we can come 
		to know in traceroute results.
	the command is traceroute <destination ip>
*** max how many hops can be traced in traceroute command?
		30
	switch is hop or not? yes
	router is hop or not? yes
	firewall is hop or not? yes

6. SS or netstat
================
netstat = rhel4,5,6
ss = rhel7,rhel8

using ss or netstat we can analyse the network statistics like what are the ports are in listen state and which remote machines
	connected for respective service or port number that data can verified
	
		eg : is vsftpd service is running or not
			ss -na | grep :21
				or
			ss -na | grep vsftpd
			how many remote machines are connected through  21 port
				ss -na | grep :21 | grep -i estab |wc -l

		
ss = socket statistics
netstat = network statistics
	
	what is the port number ? each and every service will have one reserved number. this number is for network to undrestand
		service
network will understand 22 means ssh
	23 means telnet
	21 means ftp

		LISTEN = if service is running then port will show in listen state
		ESTABLISHED = some remote machines are connected then it shows ESTBLISHED
		TIMEOUT  = connection is closing before close it will be in timeout state

	ss -nl 
	  -nl
		only list listening ports
	ss -na
	a = all

		
ss -nap | grep :21 | grep -i estab
	pid/vsftpd

	we can kill that connection forcefully
		kill 20556

=================================================================================================================

	service    port
	================ 
	ftp 	= 20/21 
	ssh 	= 22
	sftp 	= 22
	nfs 	= 2049
	samba	= 136/137/138/445
	dns 	= 53
	dhcp 	= 67/68
	NTP 	= 123
	http 	=  80
	rsync 	= 22
each and every service has unique feature.
	ftp will have one unique feature same feature many not be in other services like ssh,nfs 

				FTP
=======================================================================================================
		file transfer protocol

using ftp we can transfer files to remote machine
	through ftp we can upload and download files

	1. FTP is a very fast, stable and efficiency service to transfer files over the intranet(lan) and internet(WAN)
	2. using ftp we can transfer only files not possible to transfer directory at a time
	3. data transfer happens in binary format which security bottleneck
		
what is binary? 0101
	easy to hack and read data what is travelling between one machine to another machine, because data travelling in binary.
	
			5 things about ftp
		=================================
		1. package			vsftpd
		2. service name			vsftpd
		3. what is the port number	20/21
		4. Daemon			vsftpd
		5. configuration file of ftp	/etc/vsftpd/vsftpd.conf


package = software
rpm/yum/dnf

		ftp 192.168.237.140
			username : prasad
			password : *********
	ftp> 
now connection is established to 140 machine as a prasad user. root is not allowed for ftp service
by default root is denied
		ftp > pwd          it will tell you in remote machine which directory your
		ftp > !pwd         it will tell you your in which directory in local machine
		ftp > ls 		remote list out
		ftp > !ls           local list out 
		ftp > get filename     download file from remote to local 
		ftp > put filename    upload file from local to remote
		ftp > cd  /opt		remote change directory
		ftp > lcd  /tmp		local change directory
		ftp > bye


how to download multiple files 
	mget file1 file2 file3
		or
	mget *
disable interactive prompt inside ftp
	prompt off
	
	after prompt disable it will not ask yes or no to download files, directly it will download

how to upload multiple files
		mput *


	how to access ftp server using browser
	=====================================
		ftp://192.168.237.137
			enter user name which is present in ftp server
			password


*** what is the ftp user home directory
	/var/ftp
	grep ftp /etc/passwd
*** port numbers of ftp service
	20 and 21
	why there are 2 ports?
		21 is for connect
		20 is for data trasfer



anonymous_enable=NO

	anonymous means unknown person who doen't have user name in the server
	anonymous_enable=YES then ftp can accessible for all unknown persons

anon_root=/ftpdata
no_anon_password=YES

============================================================SSH============================================================
	secure shell


FTP : file trasfer protocol
	the drawback is data transfer happens in binary format which easy to hack and open the data between.

ssh: 
	1. Data transfer happen in encryption format
	2. remote administration can possible through ssh service
	3. we can transfer files/directories through ssh service



	
	server 1   want to connect to server 2
====================================================
	from server1 establishing connection to server 2
		ssh server2
		scp file1 server2:/tmp

  between server1 and server2 three main tasks will be performed
	1. handshake
	2. tunnel creation
	3. data transfer in encryption format inside seperate tunnel

			5 things about ssh
	====================================================
		pkg 			: openssh
		service 		: sshd
		daemon  		: sshd
		port 			: 22
		configuration file 	: /etc/ssh/sshd_config


how to connect to remote machine using ssh
		ssh 192.168.237.140
		ssh username@192.168.237.140
		ssh -l username 192.168.237.140

how to copy data from one server to another server
	scp file1 192.168.237.140:/tmp
	scp -r /testdir 192.168.237.140:/tmp
	scp -r /testdir username@192.168.237.140:/tmp


Scenario 1 :How to deny the root login through ssh service?
===========================================================
	step 1 : open configuration file and change the below parameter
		vi /etc/ssh/sshd_config
		before
			#PermitRootLogin yes
		after
			PermitRootLogin no	
	step 2 : restart the sshd service
		systemctl restart sshd

going forward root can't login through ssh service

Scenario 2 : How to deny the common users like application user and database user and all
=========================================================================================
	oracle is the database user
		using oracle user only oracle team(10) will stop and start database
now how many members should aware oracle user password?
		10 members

	recommended is disable oracle user direct login through ssh

		Step 1 : open configuraiton file and add the below parameter
			vi /etc/ssh/sshd_config

			DenyUsers  oracle,appuser
		Step 2 : restart the sshd service
				systemctl restart sshd

	how to deny the grop members
			DenyGroups   groupname,group2

Scenario 3 : how to increate ssh connections
==============================================
	by default max sessions are? 10
	
	before
		#MaxSessions 10

	after
		MaxSessions 100

	systemctl restart sshd


Scenario 4: set banner for ssh login users
===========================================
	step 1 : create the  file with banner content
		vi /etc/banner
			Hi `$USER`
			welcome to server `hostname`
			make sure your in right server and start the tasks.
			ALL BEST
	
step 2 : open configuration file and set the banner file path
		before
			#Banner none
		after
			Banner /etc/banner
	systemctl restart sshd

Scenario 5 : How to change the port number of ssh
=================================================
	step 1 : change the port number in /etc/ssh/sshd_config file
		Before
			#Port 22
		after
			Port 2222
	step 2 : inform selinux about port change
		semanage port -a -t ssh_port_t -p tcp 2222
	step 3 : restart the sshd service


ss -nap | grep :2222
	
Scenario 6: password less authentication
========================================

192.168.1.10 (prasad,oracle,bkpuser)
192.168.1.12 ( oracle )

the requirement is, oracle(1.12) user want to login to remote machine(1.10) as a prasad user without asking password.

so oracle has to trust prasad and share oracle user public key with prasad.
then prasad will allow only oracle user without asking password.


step 1 : login to 192.168.1.12 as a oracle user and generate keys 
	ssh-keygen
		just enter 3 times
step 2 : share public key with 1.10(prasad) user. first time it ask password to copy the public key next time onwards it wont ask
	cd ~/.ssh/
	ssh-copy-id -i id_rsa.pub prasad@192.168.1.10
	
	now public is shared with remote machine , now password less should work
		ssh prasad@192.168.1.10


lets configure password less manual method
===========================================
192.168.1.10 (prasad,oracle,bkpuser)
192.168.1.12 ( oracle )

requirement is , bkpuser(1.10) want to connect to 1.12(oracle) user without asking password.

in this case bkpuser has to generate public key and share with oracle(1.12).

step 1: login to 1.10 as a bkpuser and generate keys

	su - bkpuser
		ssh-keygen
		press enter key 3 times
Step 2 : copy the public key

step 3 : go to 192.168.1.12 machine as a oracle user
	go inside .ssh folder if it is not there then create .ssh folder
		mkdir .ssh
		chmod 700 .ssh
	cd .ssh
	vi authorized_keys
	  put the public of other machine here.
then give 600 permisson on authorized_keys file

		chmod 600 authorized_keys

================================================================================================================
		SFTP
	==================================================
Secure file transfer protocol

	it is sub service inside ssh. even sftp use the same protocol of ssh
		sftp service sshd
		sftp port number 22
		sftp configuration /etc/ssh/sshd_config

	sftp prasad@192.168.1.10
		get  file1
		put  file1
	bye

***** what is the port number of ssh? 22
***** what about sftp port number? 22
	panel will ask reverse question, you said 22 is for ssh and again 22 is for sftp also , is that correct. please think twice and confirm
		yes that is correct only
sftp is part ssh only both will use 22 and configuration file also same

i want to deny one of the user for sftp?
	vi /etc/ssh/sshd_config
	DenyUsers username

===============================================================NFS========================================================
Network file system

file system in network

ftp = is for transfer data (fast,efficiency,over internet can possible to accessible)
ssh = is for transfer data ( very secure, data transfer happen in encryptiontion format)
nfs = is also for transfer data 
what is the unique future of nfs?
		centralized network file system.
	file system will be in network and clients can access same file system based on their permission

requirement: there is one folder which need to access by 100 servers
		
			5 things about nfs service
		=============================================
			1. pkg	= nfs-utils
			2. service = nfs-server
			3. daemon = nfsd,mountd,nfslogd,nfslockd,nfsstatd
			4. port = 2049
			5. configuration file  = /etc/nfs.conf   and /etc/nfsmount.conf

		exporting file system in nfs  server
	=====================================================
step 1 : install nfs-utils pkg in server where we want export the file system
	yum install nfs-utils


step 2 : create directory which one we want to export for client machines.
		mkdir /appdata
		chmod 777 /appdata
Step 3 : export the /appdata directory through nfs
		vi /etc/exports
			/appdata   *(rw,sync)
		
	just restart the nfs-server service to publish the export
		systemctl start nfs-server
		systemctl enable nfs-server
	stop the firewall
		systemctl stop firewalld
		systemctl disable firewalld

	mounting nfs file system in client side
	========================================
	make sure there is route between nfs client to nfs server
		ping nfsserverip
	also verify service is accesible or not
		telnet 192.168.1.10 2049
			or
		nc -vz 192.168.1.10 2049

both are looks good then access the nfs file system

	step 1 : verify which are the file systems are exported in nfs server side
			showmount -e nfs server ip
		showmount -e 192.168.1.10
	step 2 : mount the nfs file system
		mkdir /appdata
		mount 192.168.1.10:/appdata  /appdata
finally add entry in /etc/fstab
		device name         mountpointname       filesystemtype    permissions    bkp     fscheckup
	192.168.1.10:/appdata        /appdata              nfs              defaults       0      0

=================================================================================================================


export options
==============
/appdata  *(rw,sync)

directory  networklevelaccess(permissions,sync)
/appdata   192.168.1.12(rw,sync)   tell me as per this line for how many systems we granted access to /appdata? only 1(192.168.1.12)
/appdata   192.168.1.13(ro,sync)  same file system is exported and granted read only access only to 192.168.1.13 server
/appdata   192.168.1.14(ro,sync)  14 granted only read ony
/appdata  192.168.2.*(rw,sync) granted read and write access to entire 192.168.2.* systems(192.168.2.2 has access)
/appdata 192.168.*.*(rw,sync)   granted read and write permissions to private c class network

		what permissions 192.168.4.3  has on /appdata?
			can he mount this file system? yes
		what permissions 10.17.1.3  has on /appdata?
			 can he mount this file system? no

/appdata *(rw,sync)
			what permissions 10.17.1.3  has on /appdata?
			 can he mount this file system? yes






rw = read and write permissions on export for client machines.
ro = read only permissions on export for client machines.
***** difference between sync and async?

sync= nfs server will give confirmation to client machine once file completely copied to server. 
		client started coping 1 GB data to nfs file system and nfs server will give confirmation once after copy completly
			1 GB data to server side. 
		
async= nfs server will give confirmation to client machine once client start transferring data to nfs server.
		starting it self give the confirmation like data is recieved, async will not wait until data copy.
			
	which geniune? sync

	async is giving cofirmation as soon as client start copying. incase network is inturupted between nfs server to client but
		still client will have confident like my data is copied already based that message.

***** which option improves the nfs server performance?
    async

***** how to check nfs server version
	nfsstat -s | grep -i " Server nfs"
***** how to check nfs client version
	nfsstat -c | grep -i " Client nfs"

	what is the latest version?
		nfs version 4
		what is the old version? nfs v3


==================================================
*****	difference between NFS V3 and NFS V4
	====================================
		V3							      V4
============================================================================================================================
1.connection stateless:						1. Connection statefull:
	client will send request to server for data		client will send request to server for data and track the connection
	and just wait for response.				 and expect the response if not recieved response then it has inbuilt 
									feature to retry.
	but in stateless there will not be tracking.
2. it wont support ACL						2. It supports ACL
3. It wont support physical firewall , it mean via public	3. It can support physical firewall, can possible to access nfs file
	not possible to access the nfs file system			system via internet.

====================================================================================================================================
root_squash
no_root_squash
		
***** difference between root_squash and no_root_squash
we will include this option while exporting file systems, if we mention root_squash, then client root users are consider as nfs nobody, that means remote root users consider as a normal users. remote root users will not have rights on nfs file system. only nfs server root user is the owner.

if we go with no_root_squash then remote root users consider as a administrators, even remote machines root users will have full permissions on nfs file system.

	/data  *(rw,no_root_squash,sync) is the remote root users will have full permissions on /data file system? yes
	/data  *(rw,root_squash,sync) is hte remote root usrs will have full permissons on /data file system? no
		
which is the default option? root_squash

=====================================================================================================================
***** difference between soft mount and hard mount in nfs
=========================================================
	this soft and hard mount option is applicable for client machines, whoever is mounting the nfs file system.

mount -t nfs 192.168.1.10:/appdata /appdata -o soft
mount -t nfs 192.168.1.10:/appdata /appdata -o hard

vi /etc/fstab
	192.168.1.10:/appdata  /appdata  nfs   defaults,soft  0  0
	==========================================================

	if we include soft mount during mount then nfs client will reach 2 times with 2 min interval to nfs server incase any 
		connection inturuption.
	
	if we include hard mount during mount then nfs client will reach infinity or keep try for nfs server response incase any connection inturpted.

		soft = client will try for how many minites? 4 min first attempt 2 min , second attempt after 2 min.
					retrans=2 retries=2
		hard = client will try continuesly

which is the default? hard means lets client try for nfs server continuesly incase any inturuption.

=======================================================================================================================
	client machine
***** when we execute df -h we are seeting stale error for nfs file system, how you can fix it. what is the reason file system went into stale mode

stale = idle or inaccsible.

nfs stale error:
================
	100 or more than 100 clients will send mount request to nfs server.
	nfs server is responded to 99 requests somehow it could not able to respond to 1 client. this one client will go into stale mode

	how to rectify stale error?
		in client machine unmount the stale nfs file system and remount
		
		step 1 : umount -l /appdata
		step 2 : mount -t nfs 192.168.1.10:/appdata /appdata -o soft

How to identify right now how many clients are connected to nfs server?
	login to server and find out established connections
		ss -nap | grep :2049 | grep -i "estab" |wc -l
			or
		netstat -nap | grep :2049 | grep -i "estab" |wc -l

nfs is common for all unix Operating systems.
	exported in solaris and client machine is rhel, will it work? yes


	chmod 775 /appdata
	vi /etc/exprots
		/appdata  192.168.1.12(ro,sync,no_root_squash)
		/appdata  192.168.1.11(rw,sync,no_root_squash)

	other machine
		su - prasad
		
	
==========================================================================================================================
			automount
================================================================

nfs mount(permanent mount)								automount
=============================================================================================================			
1.File system will be mounted permanently           1. file system will mount whenever we try to go inside that directory, also it 							unmount after 5 min once we comeout from that directory


	advantages of mount and unmount automatically

		1. we can save the network bandwidth between nfs client machine to nfs server, because file system in not mounting
			permanently.
		2. it can improve nfs server performance
	
	is this part of nfs client mount? yes

	autofs use any seperate file system? no it use the nfs only. we are going to schedule mount and unmount automatically.




	nfs client:
	===============
	pre-requisite
		make sure autofs package is installed
			pkg : autofs
			service : autofs
			daemon : autofs
			configuration file : /etc/autofs.conf


	

step 1 : open the auto.master file and allow / file system to support the autofs
		vi /etc/auto.master
			at end the end add below line
					/-  auto.misc
step 2 : add the nfs mount details in auto.misc file
			/appd      -fstype=nfs      192.168.1.10:/appdata


	come out and create /appd directory
			mkdir /appd

step 3 : restart the autofs service
		
==============================================
***** df -h command output is getting struck, how you can fix it? what may be the problem?

	ans:  may be one of nfs file system not mounting so df -h is getting struck

we have to find out which nfs file system have difficulty to mount and fix issue at nfs server end.

	login nfs server and verify below things
		posibility 1 : may be nfs server is down
				if server is down then start it
		possibility 2 : nfs server service is down
				login to nfs server and start the nfs service
						systemctl start nfs-server
		possibility 3 : may firewalld is blocking
				allow 2049 port in firewall or stop the firewall
				systemctl stop firewalld

	nfs service is not starting up? what may be the reason?
		i am trying to start the nfs service but it is not coming up
			may be mistakes in /etc/exports
			
				/appdata*(rw,sync)
	the above entry is wrong
				correct entry is   /appdata   *(rw,sync)
			
			another linux admin exporting one more file system 
					/appdata2  *(rwx,syn)

	it is a wrong entry, so it will effect to /appdata or not?


***** what is nfs and how you can export and mount it in client machine
nfs is nothing but network file system, we can export file system in network and clients can mount based on their access.
we have to install nfs-utils package in nfs server where we want to export the file system
once after install we can find /etc/exports file here we can add the file sytem details to export like
	/appdata   *(rw,sync)
then we can restart the nfs-server service
		systemctl restart nfs-server

then we have to go to client machine and mount this nfs file system
	first we have to check route between client machine to nfs server
			ping nfsserverip
	also we have to verify 2049 port is connecting or not
			telnet nfserverip  2049
	if connecting then good to mount

	create one local directory
		eg : mkdir /appdata
then mount
	mount nfsserverip:/appdata  /appdata 
also add entry in /etc/fstab file


============================================SAMBA=============================================================
FTP = data = only files can be upload and download in binary format.
ssh = data = we can transfer files/directories in encryption format.
NFS = data = file system will be in network, clients can access based on their permissions, clients can feel like local.
		nfs work for unix to unix servers
			aix - solaris
			aix - redhat
			redhat - solari
SAMBA = data = file system will be in network, clients can access based on theri permissions, clients can feel like local, but 
	in samba we can export file system for cross platform like unix to windows and windows to unix Operating systems.

		samba supports cross platforms(unix to windows and windows to unix)
	using samba we can export and mount file system between cross platforms like windows to linux and linux to windows.
		
			export in windows server and mount it in linux servers
			export in linux server and mount it in windows servers

NTP = date and time = 


			5 things about samba
			====================
			pkg =	samba,samba-client,cifs-utils,key-utils
			port = 139(unix) and 445(windows)
			service = smb
			daemon  = smbd
			configuration file = /etc/samba/smb.conf

	
scenario 1 : 
===========
export file system in windows and mount it in linux servers.

	how to create user in windows machine
	=====================================
		go to control panel ==> user accounts
				or
		right click on this pc ==> manage ==> local users & groups

	how to disable the firewall in windows machine
	==============================================
		control panel ==> system and security ==> windows defender firewall ==> turn off the firewall


how to check which are the file systems are exported in windows
		run prompt(windows button and press r) ==> \\localhost
	it will prompt one more window and show you what are the file systems are exported


Task 1:	exporting directory in windows: 
		select the directory and right click and go share with or give access to and click on specific people

			b28share ==> right click ===> give access to ==> specific people ==> add user ==> grant read/write permissons
					===> share


	note 1 : make sure user has been created and noted password because using same user we are going to access windows file system 
		from linux machine
	note 2 : disable the firewall in windows machine
	note 3 : get the windows ip
			cmd prompt in windows ==> ipconfig ==> vmnet8 ip address

Task 2 : mount windows share in linux machine
==============================================
	pre-requisite: make sure cifs-utils package is installed

	rpm -qa | grep cifs-utils 
			if not there install it
		yum install cifs-utils

	create one directory and mount  the windows share in linux

			mkdir /b28
			mount -t cifs //192.168.1.7/b28share  /b28 -o username=babu,password=test123
			df -h
		add entry in /etc/fstab
		=========================
	devicename	 mountpoint	 file system type	permissions	fsbackup    fscheckup
//192.168.1.7/b28share    /b28             cifs                  defaults,username=babu,password=test123   0  0


   hide the windows credentials and mount the windows share in linux machine
		cd /root
		vi .cred
			username=babu
			password=test123

		chmod 600 /root/.cred
	tell who permissions on this hidden file? only root can read and write
add entry in /etc/fstab
		=========================
	devicename	 mountpoint	 file system type	permissions	fsbackup    fscheckup
//192.168.1.7/b28share    /b28             cifs                  defaults,credentials=/root/.cred   0  0

============================================================================================================
Scenario 2 : export file system in linux and mount it in windows
================================================================
Step 1: install samba package
		yum install samba
step 2 : decide file system to export
		mkdir /winshare
		chmod 777 /winshare
step 3 : export the /winshare directory through samba
		vi /etc/samba/smb.conf

[win]
path = /winshare
read only = No
valid users = prasad

step 4 : make sure valid user is exist in the linux server , because using this user only we are going to access from windows machine
		id prasad
			if not there create

step 5 : set the samba password for valid user
		smbpasswd -a prasad
	how to list out samba users
			pdbedit -L

go to windows machine and mount it
==================================
	go to this pc ==> right click ==> map network drive ==> ip of linux (\\192.168.1.12\win) 



 
============================TCP/UDP================================================================================
tcp and udp are the network protocols.

to trasfer data tcp and udp will follow the own process that is nothing protocol.

TCP = Transmision control protocol
UDP = User datagram protocol


ssh = tcp  22
nfs = tcp 2049
samba =tcp 139
dns = udp 53
ntp = udp 123
http = tcp 80

			TCP								UDP
=============================================================================================================================
1. connection oriented protocol						1. connection less protocol
 source will establish connection with destination and then start         udp will not establish connection, it will not verify is the
	sending data to destionation.					destination is alive or not, it just through the packet
2. Performance: slow							2. peformance : faster
	because it has to check destination, take confirmation from		it is not verifying destination status, and not taking 
		destionation then only it starts sending data			any confirmation from destination, so it is faster
3.Guaranty delivery : yes, will be there				3.  gauarant delivery : no, 
	tcp will do the retry incase attempt is failed				udp will not have retry option.
4. tcp will give return confirmation status to source			4.  udp will not give any return confirmation to source 
	is the packet delivered or not						about packate delivery
5. header size is = 20 bytes						5. header size is = 8 bytes
   it has to write source ip, acknowledgement number,				it will write only destination ip and port
	destination ip, port							

	packet size = 64 bytes max						 58 bytes max for delivery



	is it possible to test udp with telnet?
		is source will establish connection to destination through udp protocol? no
			telnet destinationip 53 
					no output because udp is connection less protocol , you can not find any connected status

	for udp test telnet will not work we have to use nc

			nc -uvz destinationip 53  
			u = udp
			v = verbose
			z = zero size packets

==============================================================FIREWALL==================================================
OS level firewall
most of the companies will prefer to disable os level firewall becuase they will have physical firewall.
	os level firewall can protect only him self but physical firewall can protect full network.

	systemctl stop firewalld
	systemctl disable firewalld

	how to list out allowed services through firewall
			firewall-cmd --list-services
	how to list out allowed ports through firewall
			firewall-cmd --list-ports
	how to allow the ftp service through firewall
			firewall-cmd --zone=public --add-service=ftp --permanent
			firewall-cmd --zone=public --add-port=2049/tcp --permanent
		apply the changes
				firewall-cmd --reload

	how to remove the service
			firewall-cmd --zone=public --remove-service=ftp --permanent
				firewall-cmd --reload

===============================================================================================================================
					SELINUX
	secure enhanced linux

security is enhanced in linux os

to enter inside system firewall will take care is the right person is coming through right port number
	selinux job is protecting data inside system.

	outside of system = firewall
	inside of system  = selinux

			selinux modes
		=============================
		1. enforcing  = strictly follow the rules
		2. permissive = it will follow the rules but it will not block or it will say access denied
					permissive just give warning like you don't have but it will open
		3. disable = no rules at all , every one can access
which is recommended? enforcing

in organization which is applied? enforcing


incase selinux is blocking then we will enable particular selinux policy not all policies
	how to list out se linux policies or rules?
			getsebool -a

	how to allow particular rule in selinux
		setsebool -P samba_export_all_rw=on
	disable
		setsebool -P samba_export_all_rw=off

	

main configuration file is  : /etc/selinux/config

			
how to disable selinux permenantly?
	vi /etc/selinux/config
		SELINUX=disabled

	it will reflect after reboot the server


sestatus

command will tell you what is the status of selinux 
		as per configuration file what is the status
		tempararly what is the status

setenforce 0   ====> set se linux to permissive
setenforce 1   ====> set se linux to enforcing
==========================================================================================


		nfs server (192.168.1.10) root     /appdata  *(rw,root_squash,sync)  
		client server (192.168.1.12) root

root_squash means only 1.10 root user is the owner for /appdata share. 1.12 root user will not rights on /appdata			



================================================================================================================================

			Join Linux Server with Active directory
=================================================================================================================================

AD = Active directory
	or
DC = domain controller

		we can manage the users in central. whaterver users created in AD those users can login to linux servers.
		easy to manage the users and we can push the policies to client machines from Active directory server.

	Active directory is developed by microsoft company, it can configure only in windows server.
	we can join linux server with AD(Active directory) for user authentication.


==============================================================================================================================
					NTP/Chrony
				=================================
Network time protocol

	ntp/chrony is the service which will supply date and time to client systems. it will make sure unique date and time across 
		envionment.

clients will point out to ntp server for latest date and time.
		ntp/chrony will keep push the date and time to their clients.


ftp = files
ssh = files/directories/administration
nfs = files/directories
ntp = date and time not possible to transfer files or directories
	ntp protocol ==> UDP
	dns protocol ==> UDP
	SSH protocol ==> TCP

ntp = it was default service till rhel 6
chrony = is introduced from rhel 7 onward
which advanced is chrony
which has more features is ? chrony

		5 things about service
	=======================================
		pkg	= chrony
		port	= 323/udp  clients= 123
		daemon	= chronyd
		service = chronyd
		configuration 	= /etc/chrony.conf


Server side:
============
	step 1 : install the chrony package
		yum install chrony
	step 2 : customize the chrony configuration file
			vi /etc/chrony.conf
				server 192.168.1.12
				allow 192.168.1/24
				local stratum 10

step 3 : start the chrony service
		systemctl start chronyd
		systemctl enable chronyd
	stop the firewalld 
		systemctl stop firewalld
		systemctl disable firewalld

	how to change the timezone
	=========================
	right now EST is there and want to change it to IST
		 date
		Thu Dec  8 21:09:29 EST 2022

		ls -l /etc/localtime
	ls -l /etc/localtime
lrwxrwxrwx. 1 root root 38 Nov  3 03:24 /etc/localtime -> ../usr/share/zoneinfo/America/New_York

	remove the link and create new link with ASIA KOLKATA time zone
		
			unlink /etc/localtime
	ln -s /usr/share/zoneinfo/Asia/Kolkata /etc/localtime
 date
Fri Dec  9 07:44:25 IST 2022

		or
	timedatectl set-timezone Asia/Kolkata
	timedatectl

========================================================================================================
client integration with ntp/chorny server
========================================
	step 1 : install the chorny
		yum install chrony
	step 2 : add the chrony server ip in /etc/chrony.conf file
		server 192.168.1.12

	step 3 : sync date and time with chrony server
			chronyc makestep
		systemctl start chronyd

		chronyc tracking
	how to know ntp server ip or details
		chronyc source
============================================================================================================

				DNS
==========================================================================================================
	DNS = Domain name system

	the dns is for resolv name to ip and ip to name

	convert traffic from name to ip and ip to name this is the job of dns service

is it possible to transfer files/directories in dns service? no


network can not understand names, it can understand numbers.
humans can easy to remembers names not ips so here conflict is there

www.facebook.com  dns will resolv name(www.facebook.com) to 192.167.1.1 
www.amazon.com   dns will resolv name(www.amazon.com) to 11.1.1.2


			1. public DNS server
			2. private DNS server

amazon.com
flipkart.com
google.com
gmail.com
public dns will resolv these websites

	
			hr.info.ibm.com
			timesheet.ibm.com
			foodorder.ibm.com
			prasad.s.ibm.com


	public dns will be under IANA( internet assigned number authority) community.
	private dns will be under depends on company os administrators
			OS
		===================
			dns can possible to configure in windows
			dns can possible to configure in linux 


	you started new web site www.prasadtrainingcenter.pb.com
		it should accessible to world wide, to whom you will approach to publish to world wide?
					IANA or company?   IANA
			
			www.prasadtrainingcenter.pb.com  IN  A   11.2.1.2
IANA will add this entry in global dns server

			total we have 13 root dns servers for wolrd wide
			================================================
	india they hosted one root dns server
	us they hosted one root dns server
	srilanka no root dns server but they have child root dns server
	

		india
		==========
		1 root dns server
			3 child root dns server
				1. Bangalore
				2. delhi
				3. chennai

IANA given contract to Verisign company to maintain the root dns server

	ISP = internet service provider


 when end user type www.facebook.com how request will reach to facebook and get the webpage

 public website access:
end user browser(www.facebook.com) ==> request will send to near by root dns server with help of ISP provider==> root dns server
will resolv facebook.com to IP address ==> once it find ip of facebook.com ==> then request send it to ==> next root dns server ==>
finally put request to facebook company firewall because this ip will be active in facebook firewall. ==> now firewall will verify
the requester information like from where the request is coming,  is request is from valid ISP or not , once it verify then send 
request to Load balancer then ==> load balancer send request to web server based on load
now web server give the web page via same route data will reach to end user browser.

===========================================
inside company one of the user accessed facebook.com then 
end user browser to our internal dns server first ==> internal dns server will put request to near by root dns server again with help of ISP
===>root dns server
will resolv facebook.com to IP address ==> once it find ip of facebook.com ==> then request send it to ==> next root dns server ==>
finally put request to facebook company firewall because this ip will be active in facebook firewall. ==> now firewall will verify
the requester information like from where the request is coming,  is request is from valid ISP or not , once it verify then send 
request to Load balancer then ==> load balancer send request to web server based on load
now web server give the web page via same route data will reach to end user browser.


============================================================================================

		GTLD = General top level domains  = 21 GTLD  .com .corp .info .air .gov .edu .org
		CCTLD = contry code top level domains = .in .sl .us .uk .pk 

	
		5 things about dns
	========================================
		pkg = bind-utils,bind
		service = named
		daemon = named
		port = 53/udp
		configuration = /etc/named.conf
		
		2 zone files
		1. forward lookup zone = here we maintain name to ip records
		2. reverse lookup zone = here we maintain IP to name records

domain name which i decided for my local dns server.	
	b28.local
	b28.com
	

step 1 : install bind and bind-utils packages
	yum install bind bind-utils
Step 2 : configure the forward lookupzone file
	cd /var/named
		vi b28fw

	put the content which i shared over the mail
			f file content
step 3 : configure the named.conf file
		put the content of named file

step 4 : verify are there any mistakes in forward lookup zone file
		named-checkzone b28.local /var/named/b28fw
	verify configuration file
		named-checkconf /etc/named.conf

if no erros then start the named service
		systemctl start named
		systemctl enable named


what is the my dns server ip : 192.168.1.12
what is my dns server hostname : dserver

client integration:
===================
	vi /etc/resolv.conf
	search b28.local
	nameserver 192.168.1.12



***** what is TTL in dns?
the full form of TTL is time to live and it help to push changes after TTL time out
	eg: the changes will reflect after TTL time out only
	here we mentioned $TTL 1h means if we make any changes now that change will reflect outside after 1 hour.



where we can maintain local host entries?
	/etc/hosts

192.168.1.11	client1
192.168.1.12	dserver


	100 server we have 
is that mean that we have to maintain 100 entries in /etc/hosts file? yes

100 server * 100 entries


	in project you have 10 sever
	if you want to connect to other machines we have to maintain host entry in /etc/hosts file
		ip    name
	  your in one of the machine
			machine1 # ssh machine2
	/etc/hosts
	192.168.1.20   machine2
	192.168.1.21	machine3
	9 entries you made in machine

ssh machine2
	vi /etc/hosts
	192.168.1.19   machine1
	192.168.1.21	machine3
	9 entries you made in machine
	

	
*** explain dns records

	DNS Records
================================
	1. SOA   = start of authority            forward and reverse
	2. NS    = name server			  forward and reverse
	3. A     = Address record for IPV4		forward			name to ip
	4. AAAA  = Address record for IPV6		forward			name to ip
	5. PTR   = pointer record			reverse			ip  to name
	6. CNAME = cononical name or alias name record	forward			alias name to orinal name
	7. MX    = mail exchange server record		forward		mail server
			@  IN 	MX   192.168.1.20


prasad.babu@accenture.com
siva.prasadb@ibm.com

1. SOA   = start of authority
============================
	here we maintain dns domain name, dns master and slave dns server configurations

master   slave
incase master is down then automatically slave will act as dns server

primary = master
secodary = slave

@       IN SOA  dserver.b28.local. root.b28.local. (
                                2022121001      ; serial
                                        1h    ; refresh
                                        2h    ; retry
                                        1d  ; expire
                                        1d   ; minimum
)

first line we can see dns server name and domain name
second line serila number 
	eg : master server serial number 2022 12 12 01
		slave server serial number 2022 12 09 01

	refresh
	retry
	expire
between master server to slave dns if we have
	how frequently master should push changes to slave that is refresh
	incase first attempt is failed then again after 2 horus one attempt should do by master to push changes to slave
	1 day every 2 hours master dns tried to push changes to slave but slave is not up then master will not consider second node
		is my slave

2. NS    = name server
=======================
@               IN      NS      dserver.b28.local.

here we maintain the dns sever hostname
@ means fully qualified domain name



3. A     = Address record for IPV4   ================================> forward lookup zone
====================================
name to ip 
first entry should be dns server details
@               IN      A       192.168.1.12
dserver       IN      A       192.168.1.12
client1         IN      A       192.168.1.11

	IN = internet

4. AAAA = 
client2		IN	AAAA  1ab2.

5. PTR   = pointer record	=====================================> reverse lookup zone file
============================
ip to name
192.168.1.11  IN	PTR  client1

6. CNAME = cononical name or alias name record
============================================
facebook  IN A 191.1.3.4
fb		IN CNAME facebook
fbook		IN	CNAME  facebook

fb is the alias or cononical name for facebook

some one type in browser
	fb.com will work or not = will work
	
fb.com ===> facebook.com ==> 192.1.3.4
=======================================
fbook.com===> facebook.com ==> 192.1.3.4
=======================================

	

nslookup hostname

error:
=====
ssh dserver
ssh: Could not resolve hostname dserver: Name or service not

what may be the problem?
	first i will verify is the client machine is integrated with dns server
	i will open /etc/resolv.conf and verify the the domainname and dns server ip

	eg: search b28.local
	    nameserver 192.168.1.12   			master dns
	    nameserver 192.168.1.13   			slave dns

how to integrate client machine with dns server?
	we have to update dns server details in /etc/resolv.conf file
	like
	search domainame
	nameserver dnsserverip
============================================
	nslookup hostname


	
=========================================================HTTP====================================================
	hyper text transport protocol

http://facebook.com

	we will will configure multiple websites and publish the websites.
websites can be possible to access from browser

our role is in http:
	install http
	publish web sites
code will give by developers


ftp = data (files)
ssh = data (files/directories/administration)
nfs = data ( files /directories) file system will be in network( unix to unix)
samba = data ( files /directories) file system will be in network( cross platforms)
ntp = data ( date and time)
dns = data ( name to ip and ip to name)
http = using http we can transfer hypper text , kind of high design

	
	
	we can publish websites data through http service and that can be accessible via browser.

if we go with ftp not possible to access web pages in proper design , it will be plain format.

web sites will be developed by web designer, who is strong in html code



		5 things about service
	=======================================

	1. package	= httpd
	2. service	= httpd
	3. daemon	= httpd
	4. port		= 80
	5. config file	= /etc/httpd/conf/httpd.conf



		types of web sites configuration
	============================================================
		1. single web site with single ip	= IP Based
		2. multiple websites with single ip	= name based
		3. web site with different port number  = port based	
			normal : http://ip
			with different port number means
					http://192.168.1.11:8081
					http://192.168.1.11:8082

download free sample websites
https://www.free-css.com/free-css-templates

	step 1 : make sure httpd is installed
		yum install httpd -y
	step 2 : create one directory and put the code inside that directory
			mkdir -p /var/www/html/site1
			cp -r /root/organic-farm-website-template/* /var/www/html/site1/
	step 3: configure the web page
		note : file extention should be .conf
			cd /etc/httpd/conf.d
				vi prasadwebpages.conf
NameVirtualHost *:80
<VirtualHost *:80>
ServerName www.site1.b28.local
DocumentRoot /var/www/html/site1
</VirtualHost>

	step 4 : restart the httpd service and stop the firewall
			systemctl start httpd
			systemctl enable httpd
			systemctl stop firewalld
			systemctl disable firewalld
==================================================
dns entry:
	login to dns server and add the a record

www.site1	IN	A	192.168.1.11

	systemctl restart named
===================================================
configuring one more web site

	step 1 : create one directory and put the code inside that directory
			mkdir -p /var/www/html/site2
			cp -r /root/organic-farm-website-template/* /var/www/html/site2/
	step 2: configure the web page
		note : file extention should be .conf
			cd /etc/httpd/conf.d
				vi prasadwebpages.conf
NameVirtualHost *:80
<VirtualHost *:80>
ServerName www.site2.b28.local
DocumentRoot /var/www/html/site2
</VirtualHost>

	step 3 : restart the httpd service and stop the firewall
			systemctl restart httpd
			systemctl enable httpd

==================================================
dns entry:
	login to dns server and add the a record

www.site2	IN	A	192.168.1.11

	systemctl restart named
===================================================
configuring website with different port number( 8089)
step 1 : create one directory and put the code inside that directory
			mkdir -p /var/www/html/site3
			cp -r /root/viking/* /var/www/html/site3/
	step 2: configure the web page
		note : file extention should be .conf
			cd /etc/httpd/conf.d
				vi prasadwebpages.conf

NameVirtualHost *:8089
<VirtualHost *:8089>
ServerName www.site3.b28.local
DocumentRoot /var/www/html/site3
</VirtualHost>

	step 3 : restart httpd
			systemctl restart httpd

==================================================
dns entry:
	login to dns server and add the a record

www.site3	IN	A	192.168.1.11

	systemctl restart named
===================================================



httpd logs:
	/var/log/httpd/access_log  ====> which are the users accessed web sites and what time and will be captured
	/var/log/httpd/error_log   ====> any error occured while accessing web sites that data captured by error_log


***** what is the port number of http? 
	80
***** what is the port number of https
	443
what is the default path of document root , i mean websites path
	/var/www/html

=================================================================================================================================

			rsync
	remote sync

rsync use the following protocol (remote shell)
===============================================
			rsync = 873/tcp
			
	ssh is the service
	nfs is the service
	rsync is the tool to transfer data
	winscp is the tool or service? tool


using rsync we can transfer files and directories to remote/local host

	rsync is the tool to copy data within machine or machine to machine.

cp and scp
	cp is for copy data from one place to another place within server
		instead of cp we can use rsync also. 
	scp is for secure copy from one machine to another machine
		instead of scp we can use rsync 


advantages of rsync:
====================
good speed
	1. compressed:data will be compressed before sending and trasfer to remote machine.
	2. incremental data : rsync will not overwrite the data in remote machine if already some data is exist, it append data incase 		data is exist.

		source 2 GB    destination file already exist but size of the file is 1 GB
		tell me how much data should sync? 1 GB
		rsync advantage is it will not overwrite, it just append data to exist so it's faster than scp.
	scp will overwrite , it start sending 2 gb from starting
	rsync will append data to existing file it transfers only 1 GB 


	syn:
		rsync -avz /testdir root@192.168.1.11:/mnt

	scp -r /testdir root@192.168.1.11:/mnt

	a = all
	v = verbose
	z = with compression

==================================================================================================================================
			
		zip,tar,gzip


zip: is for compress the data
=================================

syn: 
	zip -r /bkp.zip /var/log
how to see the zip file content
	unzip -l /bkp.zip
how to extract the zip file
	unzip /bkp.zip


tar:
===
tape archive

tar is not a compression tool, it is just archive. that means keep multiple files as single.

		tar -cvf /bkpoftestdir.tar /testdir
	c= create
	v = verbose
	f = forcefully

	how to view the tar file content
			tar -tvf /bkpoftestdir.tar

	t = table of content

	how to extract the tar file
		tar -xvf /bkpoftestdir.tar


gzip:
====
gun zip
zip and gzip both are compression tools


	zip = will work for files and directories
	gzip = only for files
	
zip = will keep sorce also after compression
gzip = will not keep the source, only compressed file will be


bkpoftestdir.tar.gz

	tar -xvzf bkpoftestdir.tar.gz

how to gunzip the file
	gzip filename
how to extract gzip file
	gunzip filename.gz

how to view the gunzip file content
	zcat f1.gz


============================================Housekeeping alerts==================================================================

disk full alerts

	infra/OS team    = infra team responsible only for OS partitions ( / , /boot , /var , /home & /tmp )
	application team = 
	database team    =



	Monitoring tool = it keep monitor the server health and open case incase any obnormality
			eg : / partition utilization is > 90 %
				cpu utilization is > 90 % 
				server is shutdown then it opens ticket
	ticketing tool = monitoring tool will give signal to create ticket for the incident which is happened in system.

A shift = morning shift(6 AM 3 PM)  9 Hours
B shift = afternoon shift ( 2 PM to 11 ) 9 Hours
C shift = night shift (10 PM to 7 AM) 9 hours

	1 hour buffer time is for give shift hand over to next shift people


got the ticket like / partition utilization is > 90 %. how to handle this incident?
==================================================================================
solution 1 : 
	Task 1 : first i will acknowledge the ticket with my name and login to that alerted server.
	Task 2 : find out unwanted data and i will delete it.
		incase some one kept their data and forgot to delete those files i will cleanup
	/bkpofapplicationpartiton-20-11-2019.zip   1 GB
	
	Task 3 : got some free space after deleting unwanted files from / partiton so i will close the ticket.
		suppose there are no unwanted files and not able to clean up or make some free space then
				
solution 2 : I will compress the old files, uzing zip or gzip i will compress.
		after compress if i am able make some free space then i will close the ticket.
		suppose there are no old files not able compress and not able to make some free space then finally
solution 3 : i will extend the partition space because all our partitions are created with LVM method

	how to find out the file creation or modify date and time?
		ls -ld filename

how to find out older than 1 year files?
	find / -type f -mtime +365								P4 = low
										>=80% warning = priority 3 ( mediam)
										>=90% critical = P2 (High)
												 P1 (critical)
	
***** got the ticket like /var partition utilization is > 90 %. how to handle this incident?
=====================================================================================
	in /var partition what kind of data we can find? logs
			/var/log/
				messages
				yum.log
				httpd/error_log and access_log
				cron
solution 1 : 
	Task 1 : first i will acknowledge the ticket with my name and login to that alerted server.
	Task 2 : I will find out unwanted  and old data and delete it.
		find /var/log -type f -mtime +90 -exec rm -rf {} \;
		deleting older than 90 Days log files
		
	Task 3 : got some free space after deleting older than 3 months logs from /var partiton so i will close the ticket.
		suppose there are no old logs and not able to clean up or make some free space then

solution 2 : I will compress the older than 5 day logs, using gzip command.
		after compress if i am able to make some free space then i will close the ticket.
		suppose after compressing old logs but still there is no much free space in /var partition then, finally
	how to compress all files older than 5 days

			find /var/log -type f -mtime +5 -exec gzip {} \;	
	
solution 3 : i will extend the partition space.

got the ticket like /boot partition utilization is > 90 %. how to handle this incident?
=======================================================================================
	what kind of data will store in /boot partiton? bootable files
		like kernel and grub files

			7 times we performed patching that means
			7 kernel information(files) will store in /boot
				/boot/initramfs-3.0.10.210......img
				/boot/system-3.0.10.210......img
			for each kernel min 3 files will generate

	7 time patch * 3 = 21 kernel files are there

			/boot default size = 512 MB

	before patching recommeded to delete the old kernel files from /boot
if they forgot then we may get ticket for /boot partition is full

	we can delete old kernel files
		we can keep current and previous kernel files and delete rest of files.


***** is it possible to extend /boot partition space
	no we can't extend partition space because it is standard method not in lvm

		/boot = standard method
		/  = lvm
		/var = lvm
		/home = lvm
		/tmp  = lvm

/boot won't support the LVM
	bootable files can not install inside lvm partition.
	bootable files required primary partition not logical
		primary = 
		logical = we can not install or run bootable files in logical partition

		



	/etc/ssh/sshd_config

	by mistake we deleted the above configuration file? how we can retrive

		we have to find out rpm of sshd_config file in another machine then re-install the pkg in machine where we deleted
			configuration file
	
			rpm -ivh openssh-1..rpm --force


===========================================SUDO======================================
switch user can do
     
	granting administrator commands access to normal users.

using sudo we can provide administrators commands access to normal users.
	usually normal users will not have access on /sbin commands nothing supser user commands, using sudo we can provide access 
	on /sbin catorgory commands to normal users.


	useradd username ? is belongs to bin or sbin? sbin
	rm   is belongs to bin or sbin? bin


		lvcreate
		fdisk
		vgcreate
		userdel
		these are all comes under /sbin catogory commands. using sudo we can grant these sbin catorgory commands access to 
			normal users.



	visudo
		or
	vi /etc/sudoers


syntax:
=======
username	ALL=(ALL)     commands
========================================
prasad         hostname=(ALL)   /usr/sbin/useradd,/usr/sbin/userdel,/usr/sbin/lvcreate

============================================================================================

username	hostname=(ALL commands)   out of all which are commands granting access



granting all commands to prasad user
====================================
prasad  b27master=(ALL) ALL

  here computer name is b27master


how to provide access on particular commands
==============================================
prasad  ALL=(ALL) /usr/sbin/useradd,/usr/sbin/lvcreate

		2 commands access

how to list out sudo access list for particular user
	login to that particular user and execute sudo -l
		sudo -l

how to provide access to all the commands exept reboot
=========================================================
prasad  ALL=NOPASSWD:   ALL,!/usr/sbin/reboot


how to check command path?
	which reboot
	which useradd

how to provide particular commands access to group?
	useradd,usredel,usermode
want to grant above commands access to below group
	unixgrp

	useradd u1
	useradd u2
	groupadd unixgrp
	gpasswd -M u1,u2 unixgrp

visudo
%unixgrp    ALL=NOPASSWD:   /usr/sbin/useradd,/usr/sbin/userdel,/usr/sbin/usermode


prefix % is for group access


/var/log/secure
tail -100 /var/log/secure

whaterver commands are executed with sudo privilages those activities will store in tail -100 /var/log/secure  file

how to know which user is delete user?
	grep deletedusername  /var/log/secure

how to provide root user access to normal user
prasad	ALL=NOPASSWD su - root



***** how to know from how long server is up and running?
		uptime
***** how to know when server got rebooted?
		who -b
***** how to know which are users using system right now?
		w
		or
			last | more
how to know know nov 5th which are users used or logged in system?
			last | more
				or
			last | grep "nov   5"

=======================================================JOBS============================================================
	we can schedule commands or scripts using below tools
		1.at
		2.cron

these 2 are inbuilt tools to schedule jobs in unix servers


eg: server should reboot at 1 AM

	yum update should run at 11 AM        ==> it is not repeated job so we can go with at and schedule job
	every one hour file should get deleted ==> it is recurring job, every one hour file should get deleted that means recurring
				so here we can choose cron tool

	

at jobs:
========
	using at jobs we can schedule one time execution jobs.

		eg: today at 8 pm one task or command should execute not every day.

		at 8 pm today
			useradd t23
			shutdown -r now

		at 8 pm tomorrow
			shutdown -r now
		at 8 pm 24 dec 2022
			userdel t23


how to know what are the jobs scheduled in at
		at -l
how to remove at jobs
	atrm 1

	99.99 % we will not use at  because for one time execute mostly we will be there and execute

but repeated jobs we will get requirement to schedule so using at we can not schedule repeated jobs.


using cron we can schedule repeated jobs, that means daily so and so time , every 5 min so and task, mon and wed one task or command
		should execute


***** how to downgrade package using rpm command
	rpm -Uvh --oldpackage /run/media/root/RHEL-7.6\ Server.x86_64/Packages/vsftpd-3.0.2-25.el7.x86_64.rpm

	yum downgrade oldpackagename


			cron
	========================================
	using cron we can schedule recurring jobs or jobs or tasks which needs to execute multple times.

	eg : every day
		every min
		every sunday

		6 fields are there in cron

     *           *	   *         	*             *          	Task/job/command
    1		2	   3        	 4            5			    6
=========================================================================================
  min		hours	  dayinmonth	monthinyear    daysinweek 	Task

  1-60	        0-23	    1-31	1-12		0-6	


every day at 7 am one job should execute

	01	07	* 	*	*	sh script.sh/yum update -y


	30	14	2	*	*	sh script.sh/yum update -y

	
	only on 2nd date every month at 2:30 PM


0 = sun
1 = mon
2 = tue
3 = wen
4 = thu
5 = fri
6 = sat

	15,30,45,59      *      * 	*	0  sh script.sh/yum update -y

		every sunday 15 min once job is going to execute

	*/5		*	*	*   6,0  sh script.sh/yum update -y
	
	every 5 min

	
	every 5 min job should execute only in sat and sun


	*/2	1-6	*	*	6,0 sh script.sh/yum update -y

	- means betwee
		every sat and sun between 1 AM to 6 AM and every 2 min job should execute


how to schedule job in cron
===========================
	crontab -e
		by default cronjobs will be empty

		-e edit the crontab

	30	*	*	*	*	touch emptyfilebycron

how to list out cron jobs of that user?
		crontab -l


by default normal users can not schedule jobs in cron only root user will have permissions to schedule
note: make sure /etc/cron.allow file is created then only every normal users are restricted to use cron.
	touch /etc/cron.allow

***** how to grant crontab access to normal users
	vi /etc/cron.allow
		username
		prasad
		u1

***** your the root and you want to list out normal users jobs whatever scheduled by them?
			eg : root want to list out prasad user jobs

			crontab -u prasad -l
root want to modify prasad user jobs
			crontab -u prasad -e


cron logs will update in /var/log/cron
			================

is the job is executed or not? what is the reason job is failed that data and all will be in /var/log/cron file



***** one script should execute during server up or as soon as server is up
	crontab -e
	@reboot		sh /script.sh

***** how to schedule job every 5 min
	*/5  * * * * sh /script.sh
***** how to schedule every 10 sec?
directly we can not schedule job for every 10 sec but there is alerternate method
		first create script with every 10 sec sleep
			means execte and sleep for 10 sec

	vi /script.sh
		sh /usr/local/testscript.sh && sleep 10
		sh /usr/local/testscript.sh && sleep 10
		sh /usr/local/testscript.sh && sleep 10
		sh /usr/local/testscript.sh && sleep 10
		sh /usr/local/testscript.sh && sleep 10
		sh /usr/local/testscript.sh && sleep 10

crontab -e
	*  *   *  *  *  sh /script.sh

		within min 6 time job is executing with 10 sleep interval

***** explain crontab fields?
	6 fields are there
	first field is 	"min"
	second field is "hours"
	3rd field is "days in month"
	4th field is "months in year"
	5th field is "day in week"
	6th "job/task/command"

		
	
sh /script.sh
nohup sh /script.sh
	cat .nohup.out 
inside this file output of /script.sh will store

	
=====================================Performance Analyzing and tuning=============================================================

Hardware = Server
software = OS


which are the components will define the performance?
	1. Processor ( is a main worker)
	2. RAM
	3. Hard disk
	4. Network ethernet card
	


1. processor : it is a main component to execute the our tasks.
	
	task will be executed by processor as instructed by kernel.
	
	processor maintaince the table , inside table he maintaince running,stopped processes/jobs/tasks informaton.
	processor will have speed and capacity.
		1 GHZ
		2 GHZ

2. RAM :
	Random access memory

	he is the mediator between end user process and processor, he tasks jobs from end user and help to execute with help of processor.
	until job run ram will keep it with him .

	without RAM processes/job/tasks will not run, that means without ram os will not boot.
	RAM will have capacity 
		4 GB RAM
		8 GB RAM
		kernel will give instruction to RAM, kernel will do the management for the processes
			ms word is the task for this kernel will allocate 5 MB
			java is the task for this kernel may allocates 10 MB
3. HARD DISK:
	storage area , here we can store the data(files/directories/binaries(winscp,putty))
		in linux binaries
			telnet,bind,chrony,ntp,nfs-utils,samba-utils
	all these will store inside hard disk


the above components will define the performance(speed).
	

		using below 2 tools we can analyze the server performance
				1. TOP
				2. SAR
these 2 are free inbuilt tools.


how to execute the job and send it to background?
	cmd &

	creating 1 GB file
	dd if=/dev/zero of=/testfile1G bs=1k count=1M &

*** how to list out background running jobs
	jobs
*** how to get job to foreground
	fg %jobid
*** how to stop the job
	kill -SIGSTOP %jobid
*** how to resume the job?
	kill -SIGCONT %JOBid
	
how to list out all processes?
	ps -ef
	or 
	ps -aux 
		a= all u=users x=execution processes


	
top: using top command we can analyze cpu , memory and swap utilization of individual process.
		here we can find out individual process utilization like how much cpu used by particular process
		how much memory used by one particular process
	
	first row in top command:
	========================
			time 
			server up and running from how long
			right now how many users are logged in
			load average : average load on cpu(processor)
***** explain about load average
	aveage load on processor
	
		1.0		1.0		   1.0
		current min	last 5 min	last 15 min 
		Load average	load average	load average
	
	single process:
	===============
			1	1	1  = 100 % utilized,processor is perfectly occupied, no free time to processor on and average
			0.50   0.50     1  = 50 % cpu is utilized outof 100 % that is last 1 min and 5 min but last 15 aveage is 100 
						% utilized

			2	2	2  =  200 % utilized , load is high
	2 processors:
	============
			2	2	2   = 2 processors are utilized 100 %
			1	1	1   = 50 % cpu is utilized

	16 processors:
			32	32	32  = 200 % utilized , over loaded
	
the value will decided by 
		processor speed, task weight

		ls = light or weight = light
		cp -r 12GBfile /directory  = Weight job

only 1 worker
	his speed is 1 GHz
		1st minut you execute 20 times ls and cd commands but load average was 0.1 %
		2nd min  you executed 2 jobs like cp,rsync here load aveage was 1.2 %
now tell cpu speed is same in 1st min and 2nd min
		what is the variation 
		in 2nd min weitght jobs are triggered so load aveage was high

				


============================================zombie===========================================================
***** explain about zombie processes?

	zombie is a dead child process, it wont occupy RAM or processor capacity but it will be in processor table.
	zombie processes will clear once server reboots.

how zombies are created?
	parent process given signal to child process like kill your self.
		1211(PPID) 1212(c)  1213 (c)  1214 (c)
		
	systemctl stop sshd  ====>  asking sshd service to kill

	1212 is given signal back to parent i killed my self
	1213 also given signal back to parent i killed my self
	1214 not given signal to parent for 5 sec, then parent went away
which is the zombie process? 1214
	parent waited for 5 sec within 5 sec child didn't give kill response so he went away. now that dead child process is nothing
		but zombie
***** tell me the process states?
		running		= r
		sleeping	= s
		stopped		= T
		zombie		= Z	
		un-interable processes = D

***** how to find out zombie processes?
	ps -aux | grep Z
		or
	ps -aux | grep -i defunction
***** how to clear the zombies?
	reboot
***** once parent left of zombie who will adopt zombie process?
		PID=1

	rhel 7 = initd (1)
	rhel 8 = systemd (1)



%Cpu(s):  0.3 us,  1.0 sy,  0.0 ni, 97.7 id,  0.0 wa,  0.3 hi,  0.7 si,  0.0 st

us = user processes cpu usage
sy = system processes cpu usage
ni = priority processes cpu usage
id = what is the overall cpu idle %
	how much cpu is free
	
	idle is 99 % = what is cpu usage? 1 %
	idle is 1 % = what is the cpu usage? 99 % 

us = any processes are triggered by user manually those processes cpu usage
	idle % is 1
	us = 97 %

***** how to analyze invidual processor utilization
	top and press 1   to maximize and minimize

	or
	sar -P 1  1 2
		-P processor number 
			0 = first cpu
			1 = second cpu

***** how to get the memory(RAM) usage?
	sar -r 1 1
		or
	free -m
		or
	top


     PID USER      PR  NI    VIRT    RES    SHR S  %CPU  %MEM     TIME+ COMMAND
   2272 root      20   0   65552   5140   4268 R   1.3   0.3   0:00.80 top
    980 root      20   0  278352  10760   9152 S   0.7   0.6   0:20.73 vmtoolsd
     10 root      20   0       0      0      0 R   0.3   0.0   0:02.88 rcu_sched
   1655 apache    20   0 1351960  12076   6956 S   0.3   0.7   0:03.07 httpd
   1656 apache    20   0 1351960  12076   6956 S   0.3   0.7   0:02.95 httpd


PR = priority
	-20 is highest priority
	-19
	20 default
	19 less priority

*** how to change the priority for running process?
	renice -19 pid
			or
				top + r + then enter the process id + priority number

 2278 prasad     1 -19    7352    976    904 R  90.0   0.1   0:30.32 dd

VIRT = virtually memory utilized by particular process
RES = Residencial memory usage by particular process
	which value is exactly ocupied by process?  virtual or RES ? RES
SHR = shared memory for multple processes

***** total 4 cpus are there and one of process occupying 200 % 
	one process consuming 200%
	what is the server condition?
		is it critical or normal ? how you can decide?
		
	ANS: may be normal
		because there are 4 CPU's means 400%
		in that one process is consuming 200% still how much % is left 200 % 
	outof 400 % 200 is occupied by one process still 50 % is free



physical and virtual
=====================
physical = how to extend cpus?
	you have to buy the new processor and connect if there is free slop
virtual = there are 10 physical cpus already connected
	now virtualy i created 15 cpus for 1 virtual machine
		15 cpus will connect with 10 physical cpus only


how to kill the process:
=======================
	kill pid
		or
	pkill processname

	pkill sshd
what is the difference between kill and pkill
	kill is for kill the process with process id
	pkill is for kill the process with process name

		kill -9 pid
		kill -15 pid
		
	-9 means = interupt and kill the process forcefully
		
	-15 gracefully kill 

just kill pid means normal kill wait for clear the childs and go normally



total how many processes are there in system?
	ps -ef | wc -l
how to search sshd process id?
	ps -ef | grep sshd


***** how to get top 10 high memory usage processes?
	top + n + 10 + M

		capital M means memory(RAM) usage processes
***** how to get top 10 highest cpu usage processes?
		top + n + 10 + C
	
		capital C
***** how to get individual user processes?
	top + u + prasad


*** how to get the child processes of process id
	 pstree -p pid
		eg : pstree -p 1


=============================SAR (system activity report)=========================================
	top
	SAR

		pkg 	= sysstat
		service = sysstat     systemctl status sysstat
		configuration file  = /etc/systemd/sysstat
		what is the default path of sa file  = /var/log/sa
sa1
sa2
sadc are the libraries/programs which will collect system data


both are inbuilt tools to analyze the server peformance.

difference between top and sar
==============================
1. SAR can provide historical performance report of server
	eg : 10 day ago how was server performance
		by default last 1 month data will be there in server

	how was cpu usage on 15 dec
	how was the memory usage on 15 dec


	in top command we can not get historical data only live data.
2. SAR can give only overall report not invidual process utilization

	but top command can give current running processes and individual process utilization.
		individual process how much cpu and RAM consuming that can get in top command


how to get RAM utilization?
	sar -r 1 2

		-r = memory report
		1 = 1 sec interval
		2 = 2 times report should print

	sar -r 2 10
		2= 2 sec interval time
		10 = 10 times

how to get cpu usage
	sar -u 1 3
how to get swap usage
	sar -S 1 3
how to get load average
	sar -q 1 3
how to get disk performance
	sar -d -p 1 3


***** how to know what are the processes using that partition?
	lsof +D /
		or
	fuser -v /


lsof = list opened files
	fuser = file system users
which are users inside partition


how to unmount partition forcefully?
	umount -l /mountpoint
	-f = forcefully
	-l = lazy unmount


	sar data will store in /var/log/sa   directory
by default last 1 month data will available in /var/log/sa

how was the memory usage on nov 30
	sar -r -f /var/log/sa/sa29
how was the cpu usage on nov 30
	sar -u -f /var/log/sa/sa29
how was the load average on nov 30
	sar -q -f /var/log/sa/sa29

by default sar will get the every 10 min interval data


			sa1  /usr/lib64/sa/sa1
			sa2 /usr/lib64/sa/sa2
			sadc  /usr/lib64/sa/sadc
	the above programs will run and collect the over all report
		sadc = system activity data collector
			he will run every 10 min and collect the cpu,memory,swap,disk all the components utilization
	

sa1 = will run every 10 and ask sadc to collect the data once sadc collects the data then sa1 will update the same data inside 
		/var/log/sa/sa30 file

	who is collecting data? sadc
	who will ask sadc to run? sa1
	who will update data inside file? sa1
sa2 : he will run at 11:53 PM and ask sadc to collect the over report of the day and put same data inside /var/log/sa/sa30 file

	sa2 will run only 1 time in the day, at what time it runs? 11:53 pm 
	sa1 will run every 10 min

	

***** how to read 5 days back cpu and memory utilization of server?
	using sar tool we can get this data
	first we have go inside /var/log/sa directory
	here we can find 5 day back file
		ls -l
	using sar command we can read the cpu and memory usage
		sar -r -f thatfilename<sa30>
		sar -u -f thatfilename<sa30>

   sar package is sysstat
   


how to find out is the http is running or not?
	systemctl status httpd
		or
	ps -ef | grep http

is java process running or not?
	ps -ef | grep java
is tomcat process status?
	ps -ef | grep tomcat

application team reported incident like 4 hours back server performance was too slow? how you can validate that?

	we have to verify 4 hours back server performance so first i will go to /var/log/sa directory and find out today sa file
			ls -ltr
		here last file is todays file so i will read cpu usage using sar command
			sar -u -f todaysdate file
				i will analyze idle % in this output
					if idle % was > 20 % then cpu usage is normal
					also i will verify memory usage 
						sar -r -f todaysdate file
						here i will verify memusage column

	if both looks normal then i will confirm server performance is normal.
	no issue at server level

======================================================= swap =========================================================
*****what is swap? or explain about swap

swap is a virtual memory, it is a supporter of RAM, if RAM is full tasks will be stayed in SWAP once RAM is free then again task
will come to RAM for execution.

	here page out means , task is moving out from RAM to SWAP
	PAGE IN means , task is coming back from SWAP to RAM

swap space is allocated from hard disk, swap can not send task to processor. alway task can go via RAM only.


how to see the currently allocated swap?
	free -m
	or
	swapon -s

how to create swap with partition method
	step 1 : create lv
		lvcreate -L 2G -n swap1 rhel
	step 2 : format the swap
		mkswap /dev/rhel/swap1
	step 3: add swap entry in /etc/fstab
	add entry in /etc/fstab
		/dev/rhel/swap1    swap    swap   defaults    0   0
	step 4 : switch on the swap
		swapon /dev/rhel/swap1

	
how to create swap with file based method
	there is free space in vg to create swap lv but imediatly needs to create swap? 
if there is any free space inside partition then we can create swap file

		dd if=/dev/zero of=/swap3  bs=1k count=2M
		mkswap /swap3
		chmod 600 /swap3
		swapon /swap3
	/etc/fstab
	/swap3	swap   swap  defaults 0 0
	

how to move tasks from swap to RAM?
	swapoff -a

*****	swap utilization is 2 GB and before switch off the swap what proactive thing needs to check?
		make sure 2 GB RAM is free then only swap can push the tasks to RAM


=======================================================================================================
1. Deploying sever in azure platform
	1. GUI method through portal
	2. Template method 
2. Disk Management
	creating new disk
	extending existing disk space ( echo 1 > /sys/block/sdc/device/rescan) & pvresize /dev/sdc
	deleting disk ( deatach the disk from the server and go to disks service and find out the disk and delete)
3. Snapshot Management
	Taking snapshot for OS disk and data disk
	delete the snapshot
	creating disk using snapshot
4. scaleup or resizing the machine size
	make sure backup is success
	make sure application is stopped
	then de-allocate the server
	resize the machine size in size option
	start the server
	ask application team to start the application
5. Backup management
	i) Create recovery service vault
	ii) Creating Backup policy
	iii) enabling backup for virtual machines
	iV) Triggering backup instant backup for virtual machines
	V) Restoring the latest restore point
6. Assigning additional IP address to existing ethernet card
	we will assign additional ip address to existing ehternet card as secondary IP
		vm ==> networking ==> ethnet card name ==> IP configuration ==> add ==> static 
7. creating new ethernet card and assign ethernet card to virtual machine
	search ==> network interfaces ==> create new ethernet card and assign it to virtual machine.
		machine should be in de-allocation status to attach the extra ethernet card
8. NSG( network security group) machine level firewall
		or
	subnet level firewall
		writting the rules
			like allowing port and denying port based on request or requirement
9. Extending root partition space
10. rescue method
	I know how to take machine into rescue in azure portal
11. i know to swap the OS disk

12. Vnet configuration
13. Vnet peering
14. Enabling disaster recovery

		still pending
			Blob
			file share
			ANF
			Load balancer
			IAM

============================================================ITIL process===============================================
ITIL = INFORATION Technology Infrastructure Library
===================================================
	Data center
	server administration
	OS administration
	network administration
	backup administration
we are from infra team


ITIL is nothing predefined process and check lists about project run
	how to handle incase any incident for this there will be a seperate process(SOP)
	how to handle the request incase any request from other teams
		deploying server
		
SOP(Standard operating procedure)

		24/7 = 365 days 24 hours some one should available 
			employee 1 = breakfast time is 8 - 9 AM
			employee 2 = breakfast time is 9 - 10 AM
this point also belongs to ITIL process

	SLA
=====================
	Service level aggreement

	VISA asked IBM to management the infrastructure like building servers, installing application, supporting daily tasks

VISA = is a company they are taking IBM support to support the infra structure . for VISA IBM is the vendor
IBM = is a company they are providing service to VISA, for IBM VISA is a client

	Aggrement between VISA and IBM is called as SLA.

	here they will include 
	======================
	5 Year aggrement
	Total amount is so and so
	payment every month 5th to IBM
	SLA time 24/7
	night shift 5 engineers
	morning shift 5 engineers
	afternoonshift 7 engineers
	shift avalavnce can be provided
	P1 ticket = within 1 hour should be resolved
	P2 ticket = within 4 hours should be resolved

			ITIL is the predefined process or check lists, companies can modify the process based on client requirement.


			3 Main components of ITIL
		==============================================
			1. Change Management
			2. Incident Management
			3. Problem Management

incase change need to do for 10 servers then which process has to followed?
incase server is down then which process has to followed? incident
repeatedly one server is restarting , then which process has to followed? problem

1. change management process
=============================
	1. Patching
	2. extending RAM size
	3. extending CPU's 
	4. Granting permission on nfs file system
	5. modifying the kernel parameters
	6. extending partition space
	7. reducing partition space
	8. exporting nfs file system
	9. installing one of the tool in server
	10. un-installing one of the tool/software from the server

how to do only kernel patching?
	yum update kernel
	zypper update kernel
how to update the security patches?
	yum update security

50 security packages are there
	after 1 year os vendor will release the new security packages?
		OS vendor will recommend to update the latest package to get the new features and protection features.

Mon	  tue			wed		thu		fri		sunday 1 AM to 7 AM
RFC ===> CR preparation ==> TAB Meeting ==> CAB Meeting ==> Go/No-Go call ==> change implementation
										sucess = then close the change
										failed = roll back the change

			

change window time = 1 AM to 7 AM
change window period = 6 Hours

patching is the change
RFC = request for change
CAB = change advisory board ( some seniors, who will reivew the change tasks and approve to implement)
TAB = Technical advisory board( some seniors, who will review the change tasks and it is ok to put front of client)

			Environment
==================================================
		1. Production  =======> revenue will be generated by only production environment   - sunday morning at 1 AM to 7 AM
		2. DR ( Disaster recovery)
		3. Pre-production - thursday  at 1 AM to 7 AM
		4. QA - thursday  at 1 AM to 7 AM
		5. DEV
		6. TEST/LAB/sandbox - thursday  at 1 AM to 7 AM


change management process needs follow for all the environments

	PMO Team(project Management office) 
=======================================
	IBM is a  vendor for VISA
	VISA is a client for IBM
like this ibm will have n number clients
	some 30 will work for VISA
	some other 25 members work for Mark
	some other 15 members work for Reliance
5 members are rectruted for PMO TEAM
	their job is manage the project
	make sure ITIL process is followed

  
Mon	  tue			wed		thu		fri		sunday 1 AM to 7 AM
RFC ===> CR preparation ==> TAB Meeting ==> CAB Meeting ==> Go/No-Go call ==> change implementation
										sucess = then close the change
										failed = roll back the change

Day 1 : RFC = request for change
====================================
application team asked pmo team to open change for install one of the tool
application team asked pmo team to open change for adjust the one of the kernel parameter
application team asked pmo team to extend the RAM Size
linux team asked pmo team to open change for patching

	Ticketing tool
	=============
	Service now is your ticketing tool
	SNOW

		pmo team will open change in ticketing tool
			or
		sometime ourself needs to create change in ticketing tool


Day2: CR preparation ( tuesday)
====================
Change request needs to prepare
	or
Change Execution plan or steps
eg: we are planning to do OS patching for this we are going to prepare the CEP ( Change execution plan)
		CEP will be prepared by RFC owner

	patching ==> Linux so in this case who has to prepare CEP ? linux team
	db level changes ==> database team is the RFC so they has to prepare CEP

In CEP implementation steps are included with timing and owner of the task

Day3: TAB Meeting ( wednday)
==================
Techinical advisory board

PMO team will schedule meeting to discuss about CEP plan
here sme( subject mater expert) and L3 Level 3 engineer will review the CR
	if corrections required then they will asked to do the changes in CEP plan

	L1 = 0 to 3 Years experience
	L2 = 3 to 6 Years experience
	L3 = 6 to 9 Years experience
	SME = 9 to 15 Years experience
	architect = 15 - 20 years of experience

Day4: CAB meeting - thursday
=================
Change advisory board
in cab meeting client represents will participate for review the change and give approval for change implementation
	one pmo will prepare sheet for all the changes for coming weekend
		change1 : Linux team -  OS patching for QA servers   CAB is approved tick mark
		change2 : DB team    -  customize the db parameters
		change3 : Network team - allow the one of the port

	once every joins in meeting then
		pmo team will go through one by one by changes
			first is linux team is present in call?
				then yes this is prasad from linux team
	this change is for OS patching it regular change, we are doing in QA environment
		servers will be rebooted
			now CAB board memebers will say one by one
					michael = will say i am ok to proced with this change
					marcus = will say i am ok to proced with this change
					danies	 = will say i am ok to proced with this change


Day5: Go/No-gocall ( Friday)
====================
	here pmo and client will join in meeting and pmo take final approval for all the changes
		if they say here don't go with this change then we have stop


Day 7 : Implementaion: sunday early morning
===========================================
	pmo team will schedule meeting with all the team whoever required for change implementaion
	once everyone join then start the tasks as per CEP plan
		
		who will co-ordinate with client for approval? PMO TEAM
		incase Maintenance window needs to extend for 1 more hours, who will co-ordinate with client? 
					linux team will request pmo and pmo team co-ordinate with client
			
========================================================================================================================
						Incident Management
				=======================================================
	unexpectedly something happened in server or services.
this incident impacting business
			
	Monitoring system : eg: Nagios is the ticketing tool, it keep monitor the server health and services health
		incase any server or service is down then imedielty it creates the ticket in ticketing tool
	ticketing tool is a tracking system
		we can create ticket for tracking purpose
				like when incident happened
				who worked
				what was the issue
				how it got resolved

	
	incident example
	===============
	1. server got hung
	2. server is down
	3. High cpu utilization
	4. High memory utilization
	5. service is down
	6. server got rebooted automatically
	7. users unable to login
	8. application is not working
	9. db is not working

Priority 1 incident
P2   incident
P3   incident
P4   incident

service request(sr)
operational request
ORT = operational reqquest task
	granting sudo rights
	Create user
	extending partition space
	grant crontab access

				production server is down and business is impacted? P1  and critical
				dev sysem is down? what priority we can give? P2
				High cpu utilization in dev system > 80 %  = P3
				high cpu utilization in production system > 80 % = P2

				Incident SLA
Priority		acknowledge time or 
			response time			Resolve time		Restore time(permanent solution)     RCA		
============================================================================================================================
P1			15 Min				4 Hours			24 hours			24 Hours
P2			15 Min				8 Hours
P3			30 Min				24 hours
P4			30 Min				48 Hours

acknowledgement means assigning ticket with your name
	P1 ticket is not acknowledged within 15 min what the penalty from client? amount

	P1 ticket means which is the incident impacting to business

		there are 2 systems for same application
			in that 1 system is down but other one is running , no business impact? 
				what is the incident priority? P2

	Server 1 = application 1 is running
	server 2 = application 2 is running
suddenly server2 is down? it is produciton system
	within 1 hour we moved server2 application to server1
		now business is running fine
restore means: fix the server 2 issue and bring application2 back to server 2
				change types
			=============================	
			Routine change : patching, reboot the server every year once that is on dec 31 for 12 hours
			Standard change : install the tool, reduce the partition space, extend the RAM, extend the cpu
						RFC,TAB,CAB,go or no go all the things will followed
			emergency change : standard changes will consider as emergency based on business impact
				P1 will come incase we couldn't increase RAM
					this change consider as emergency change
					so no need to follow cab,tab all those things
				just open emergency change in ticketing tool and asked client to approve

==============================================================================================================================

RCA = Root cause of analasys
				RCA will be done only for P1
				============================
	analyse the cause for root

	here one pmo will co-ordinate with respective team
		L3 or seniors will join in RCA call
				
		issue: server got rebooted or hung because of high memory utilization by application
		issue resolved: server got rebooted
		permanent fix or solution? : right now RAM size is 8 GB we can go for 12 GB


	/var is full server will go into hung mode
		solution : take system into rescue mode and cleanup the some old logs and also extended partition space
		issue : /var partition is full
		permanent fix or solution : extended the partition space

	 
P1 incidnet process
====================
	with in 15 min we should acknowledge the ticket 
	we have to involve PMO or incident management team
		pmo team or incident management team opens the conference meeting.
			all the teams will join here and start working on the incident
			technical person will focus on issue and try to fix it
		pmo will inform client about P1 incident to client
		every 30 min once pmo team will give update to client about progress

P2 incidents:
============
	within 15 min we should acknowledge the ticket
		no need to involve PMO or incident management team
		no need to open any conference meeting


	ticketing flow
	=============
	ticket will be in open/new state
		change status to in-progress
		assignee to your name
			comment in ticket : we are working on incident or we are working on request
	completed work then what status we have to change : resolved
	close


  open/new ========> In-progress ======> pending for customer ======> in-progress ====> resolved ======> close
	
			in-progress
			pending-for-customer
			pending-for-vendor
			resolved
			re-open
			close


==============================================================================================================================
			Problem management
	===============================================
	repeated incidents consider as a problem where we don't have permanent fix or solution for that
we are following up with vendor(redhat/suse)

	every week server is going down, we don't have solution. so we opened case with redhat or suse
	frequently server is getting hang, we couldn't find any issue . so we opened case with redhat or suse

		redhat asked to perform patching
			now we will standard change followed all the procedure and implement patching waiting for issue
				again issue is repeated after patching then again inform vendor 
			next time vendor will come and do some changes at os level 
				again follow the change process and implement those



==============================================================================================================================
Handling vulnerabilities?
=========================
	risk for the server
	there is bottelneck for the server
which needs to close 

eg: 
===
	PermitRootLogin yes
	USB is allowed
	it is a database server but we are using the vsftpd service
	old nfs version is running
	any old packages which are running
	patching is required
	kernel parameter is enabled? which needs to be disabled
	
vulnerability tool:Qualis guard
===================
every 15 days or every month once report will be delivered to you team

manager may asked 1 or 2 people take care vulnerabilites

	in production system we need to change the one of kernel parameter?
		who is the RFC? linux team
		

	
============================kernel parameters===================
what is the kernel? 
 kernel is a one of the core program
	we call kernel is a heart of the OS
	it does the memory management,cpu management and resource management

even kernel will have some instructions
	that instructions are nothing but kernel parameters

how to listout kernel parameters?
	sysctl -a

how to change the kernel parameter
	sysctl vm.swappiness=10
	sysctl -p

	ram =100
		we are informing to kernel
			like 90 % jobs should stay in RAM and once it cross greater than 90 % then only swap should accept the tasks

		
	eg: swappiness = 50 %
			once ram utilization cross 50 % then next jobs starting diverting to swap

what is the kernel configuration file?
		/etc/sysctl.conf
		/etc/sysctl.d


			what is the command to listout kernel parameters?
					sysctl -a
			what is the main configuration file of kernel paramters?
				/etc/sysctl.conf
			
kernel has limits
		with help limits only kernel is functionining like
			max how many processes can run
			max how many users can login
			max how files can open
			
	how to list out kernel limits
======================================================
		ulimt -a

can't login, new open process quota exceeded
	nproc value needs to increase
		number processes value 
	other issue:
	==========
	when we try to open any file then we get error like
			max file quota is exceeded
	

			how to increase number files
				ulimit -n 2048
			max user processes
					ulimit -u unlimited

	main configuration file of ulimits
		vi /etc/security/limits.conf

@prasad         soft    nproc           300
@prasad         hard    nproc           2000
@prasad         soft    maxlogins       2
@prasad         hard    maxlogins       10
*               soft    maxlogins       2
*               hard    maxlogins       20



* means for all
	maxlogins max we set 20
			in this system maximum 20 members can login at a time

nproc = number of process
nofile - max number of open file descriptors

 
***** sometime back user1 is loged in and again he is trying to login to same server but not happening
	what may be the issue
			account is locked
			password is locked
			password wrong attempts tried so account got locked
			shell may nologin
			may be ulimit values are exceeded
					like nproc
						maxloings
	these things we have verify once

***** couln't able to open the file?
		permissions
		owner
		nofiles may exceeded so we have to increase the nofiles quota
				using ulimit command.


***** user unable to create file or directory inside file system
		even root not able to create

		size
		inode number 
	

	/dev/vg/lv01 it a partition
		mkfs.xfs /dev/vg/lv01
			kernel allocate inode numbers to partition based on size
				1 TB some inodes
				2 TB more inodes

	empty file will occupy inode number or not?
			yes


	how to get the inode utilization?
			df -hi

***** how to increase the inode numbers
		extend the partition space that's it
there is no way to increase only inode numbers
	
first i deleted empty files then i got some free inodes ( find path -type empty -exec rm -rf {} \; ) 
							 find path -size 0 -exec rm -rf {} \;

still need few more inodes so i extended partition space


=========================================

		Server hardening tasks
===========================================================================================================
		build the server
		complete the post build activities
		harden the server
		fix the vulnerabilities
		patching
		upgrade
		exporting nfs file system
		ntp configuration
		dns integration


harden the server: blocking the security bottelneck
		if there are any security threats closing

		
			1. permitrootlogin no
			2. disabling usb
			3. setting up the grub password
			4. disabling telnet service ( yum remove telnet or systemctl disable telnet)
			5. disabling vsftpd         ( systemctl disable vsftpd or yum remove vsftpd)
			6. disable ctrl alt del key combination functionality
					reboot
			7. password policies
				like
					account should lock if user tries 3 wrong attempts
					password change policy
							like
							min 2 uppercases
							min 1 dec
							max 15 char
			8. file system checkup is mandatory   /etc/fstab ( /dev/vg/lv /mountpoint xfs defaults 1 2)
			9. ip forwarding should disabled
				sysctl -a net.ipv4.ip_forward=0
					0 = disable
					1 = enable

2. disabling usb
==================
	vi /etc/modprobe.d/no-usb
		install usb-storage /bin/true
	
	it will effect after reboot of the server

3. setting up the grub password
==================================
	step1 : set the grub password
			grub2-setpassword 
	step 2 : verify is the password is set or not
			cat /boot/grub2/user.cfg


6. disable ctrl alt del key combination functionality
==================================================
		how to disbale
			systemctl mask ctrl-alt-del.target
	enable back
		systemctl unmask ctrl-alt-del.target

7. empty password should not accepted
=====================================
	step1 : update the empty password parameter
		vi /etc/ssh/sshd_config
			#PermitEmptyPasswords no
	step 2 : restart the service
			systemctl restart sshd
















